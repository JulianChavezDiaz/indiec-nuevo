{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { extend, Browser, remove } from '@syncfusion/ej2-base';\nimport { PointData, ChartLocation } from '../../common/utils/helper';\nimport { getElement, measureText, Rect } from '@syncfusion/ej2-svg-base';\nimport { valueToCoefficient, removeElement, valueToPolarCoefficient, withInBounds } from '../../common/utils/helper';\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\nimport { tooltipRender, sharedTooltipRender } from '../../common/model/constants';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\r\n * `Tooltip` module is used to render the tooltip for chart series.\r\n */\nvar Tooltip = /** @class */function (_super) {\n  __extends(Tooltip, _super);\n  /**\r\n   * Constructor for the Touch module.\r\n   *\r\n   * @param {Chart} chart - The chart instance.\r\n   */\n  function Tooltip(chart) {\n    var _this = _super.call(this, chart) || this;\n    _this.commonXvalues = [];\n    _this.addEventListener();\n    return _this;\n  }\n  /**\r\n   * Adds event listeners for the chart.\r\n   *\r\n   * @returns {void}\r\n   */\n  Tooltip.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n    this.chart.on('tapHold', this.longPress, this);\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n  };\n  Tooltip.prototype.mouseUpHandler = function () {\n    var chart = this.control;\n    var data = this.getData();\n    data.lierIndex = this.lierIndex;\n    if (chart.isTouch && !this.isSelected(chart) && (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect) && chart.tooltip.shared || !chart.tooltip.shared)) {\n      if (!chart.crosshair.enable) {\n        this.tooltip();\n        if (chart.tooltip.fadeOutMode === 'Move') {\n          this.removeTooltip(chart.tooltip.fadeOutDuration);\n        }\n      } else if (chart.startMove && chart.tooltip.fadeOutMode === 'Move') {\n        this.removeTooltip(2000);\n      }\n    } else if (!this.findData(data, this.previousPoints[0]) && chart.tooltip.fadeOutMode === 'Click') {\n      this.removeTooltip(0);\n    }\n  };\n  Tooltip.prototype.mouseLeaveHandler = function () {\n    this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n  };\n  Tooltip.prototype.mouseMoveHandler = function () {\n    var chart = this.chart;\n    if (chart.stockChart && chart.stockChart.onPanning) {\n      if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\n      } else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\n      }\n    }\n    // Tooltip for chart series.\n    if (!chart.disableTrackTooltip && !this.isSelected(chart)) {\n      if (!chart.tooltip.shared && (!chart.isTouch || chart.startMove)) {\n        this.tooltip();\n      }\n      if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        if (chart.tooltip.shared && (!chart.isTouch || chart.startMove)) {\n          this.tooltip();\n        }\n      } else {\n        if (chart.tooltip.shared && chart.tooltip.fadeOutMode === 'Move') {\n          this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n        }\n      }\n    }\n  };\n  /**\r\n   * Handles the long press on chart.\r\n   *\r\n   * @returns {boolean} false\r\n   * @private\r\n   */\n  Tooltip.prototype.longPress = function () {\n    var chart = this.chart;\n    if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n      this.tooltip();\n      chart.markerRender.markerMove(false);\n    }\n    return false;\n  };\n  /**\r\n   * Renders the tooltip.\r\n   *\r\n   * @returns {void}\r\n   */\n  Tooltip.prototype.tooltip = function () {\n    var elementId = this.chart.enableCanvas ? this.element.id + '_tooltip_group' : this.element.id + '_tooltip_svg';\n    var svgElement = this.getElement(elementId);\n    // To prevent the disappearance of the tooltip, while resize the stock chart.\n    var isStockSvg = this.chart.stockChart && svgElement && svgElement.firstChild.childNodes.length > 1;\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0 && !isStockSvg;\n    var tooltipDiv = this.getTooltipElement(isTooltip);\n    if (this.chart.enableCanvas && tooltipDiv) {\n      document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n      tooltipDiv.appendChild(document.getElementById(this.chart.element.id + '_tooltip_svg'));\n    }\n    if (!this.chart.tooltip.shared) {\n      this.renderSeriesTooltip(this.chart, !isTooltip, tooltipDiv);\n    } else {\n      this.renderGroupedTooltip(this.chart, !isTooltip, tooltipDiv);\n    }\n  };\n  Tooltip.prototype.findHeader = function (data) {\n    if (this.header === '') {\n      return '';\n    }\n    this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\n    if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n      return this.header;\n    }\n    return '';\n  };\n  Tooltip.prototype.findShapes = function () {\n    if (!this.chart.tooltip.enableMarker) {\n      return [];\n    }\n    var marker = [];\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var data = _a[_i];\n      marker.push(data.point.marker.shape || data.series.marker.shape || 'Circle');\n    }\n    return marker;\n  };\n  Tooltip.prototype.renderSeriesTooltip = function (chart, isFirst, tooltipDiv) {\n    var data = this.getData();\n    data.lierIndex = this.lierIndex;\n    this.currentPoints = [];\n    if (this.findData(data, this.previousPoints[0])) {\n      if (!(chart.dataEditingModule && chart.dataEditingModule.isPointDragging) && this.previousPoints[0] && data.point.index === this.previousPoints[0].point.index && data.series.index === this.previousPoints[0].series.index) {\n        return null;\n      }\n      if (this.pushData(data, isFirst, tooltipDiv, true)) {\n        this.triggerTooltipRender(data, isFirst, this.getTooltipText(data), this.findHeader(data));\n      }\n    } else {\n      if (!data.point && this.isRemove && chart.tooltip.fadeOutMode === 'Move') {\n        this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n        this.isRemove = false;\n      } else {\n        var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n          var series = _a[_i];\n          if (series.visible && !(series.category === 'TrendLine')) {\n            data = this.getClosestX(chart, series, commonXvalues) || data;\n          }\n        }\n      }\n    }\n    if (data && data.point) {\n      this.findMouseValue(data, chart);\n    }\n  };\n  Tooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText) {\n    var _this = this;\n    var tooltipTemplate;\n    var argsData = {\n      cancel: false,\n      name: tooltipRender,\n      text: textCollection,\n      headerText: headerText,\n      template: tooltipTemplate,\n      series: this.chart.isBlazor ? {} : point.series,\n      textStyle: this.textStyle,\n      point: point.point,\n      data: {\n        pointX: point.point.x,\n        pointY: point.point.y,\n        seriesIndex: point.series.index,\n        seriesName: point.series.name,\n        pointIndex: point.point.index,\n        pointText: point.point.text\n      }\n    };\n    var borderWidth = this.chart.border.width;\n    var padding = 3;\n    var tooltip = this.chart.tooltip;\n    var chartTooltipSuccess = function (argsData) {\n      if (!argsData.cancel) {\n        if (point.series.type === 'BoxAndWhisker') {\n          _this.removeText();\n          isFirst = true;\n        }\n        _this.headerText = argsData.headerText;\n        _this.formattedText = _this.formattedText.concat(argsData.text);\n        _this.text = _this.formattedText;\n        var location_1 = _this.getSymbolLocation(point);\n        location_1 = location_1 ? location_1 : new ChartLocation(null, null);\n        location_1.x = tooltip.location.x !== null ? tooltip.location.x : location_1.x;\n        location_1.y = tooltip.location.y !== null ? tooltip.location.y : location_1.y;\n        location_1 = location_1.x === null && location_1.y === null ? null : location_1;\n        _this.createTooltip(_this.chart, isFirst, location_1, point.series.clipRect, point.point, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), new Rect(borderWidth, borderWidth, _this.chart.availableSize.width - padding - borderWidth * 2, _this.chart.availableSize.height - padding - borderWidth * 2), _this.chart.crosshair.enable, null, _this.getTemplateText(point), _this.template ? argsData.template : '');\n      } else {\n        _this.removeHighlight();\n        remove(_this.getElement(_this.element.id + '_tooltip'));\n      }\n      _this.isRemove = true;\n    };\n    chartTooltipSuccess.bind(this, point);\n    this.chart.trigger(tooltipRender, argsData, chartTooltipSuccess);\n  };\n  Tooltip.prototype.findMarkerHeight = function (pointData) {\n    var markerHeight = 0;\n    var series = pointData.series;\n    markerHeight = (series.marker.visible || this.chart.tooltip.shared && (!series.isRectSeries || series.marker.visible) || series.type === 'Scatter' || series.drawType === 'Scatter') && !(series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose') ? (series.marker.height + 2) / 2 + 2 * series.marker.border.width : 0;\n    return markerHeight;\n  };\n  Tooltip.prototype.findData = function (data, previous) {\n    return data.point && (!previous || previous.point !== data.point || previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex || previous.point === data.point);\n  };\n  Tooltip.prototype.getSymbolLocation = function (data) {\n    var location;\n    if (data.series.type !== 'BoxAndWhisker') {\n      if (!data.point.symbolLocations[0]) {\n        return null;\n      }\n      location = new ChartLocation(data.point.symbolLocations[0].x, data.point.symbolLocations[0].y);\n    }\n    switch (data.series.type) {\n      case 'BoxAndWhisker':\n        return this.getBoxLocation(data);\n      case 'Waterfall':\n        return this.getWaterfallRegion(data, location);\n      case 'RangeArea':\n      case 'RangeStepArea':\n      case 'SplineRangeArea':\n      case 'RangeColumn':\n        return this.getRangeArea(data, location);\n      default:\n        return location;\n    }\n  };\n  Tooltip.prototype.getRangeArea = function (data, location) {\n    if (data.point.regions[0]) {\n      if (!this.inverted) {\n        location.y = data.point.regions[0].y + data.point.regions[0].height / 2;\n      } else {\n        location.x = data.point.regions[0].x + data.point.regions[0].width / 2;\n      }\n      if (data.series.type === 'RangeStepArea') {\n        location.y = data.point.regions[0].y + data.point.regions[0].height / 2 + data.point.regions[0].width;\n      }\n    }\n    return location;\n  };\n  Tooltip.prototype.getWaterfallRegion = function (data, location) {\n    if (!this.inverted) {\n      location.y = data.point.y < 0 ? location.y - data.point.regions[0].height : location.y;\n    } else {\n      location.x = data.point.y < 0 ? location.x + data.point.regions[0].width : location.x;\n    }\n    return location;\n  };\n  Tooltip.prototype.getTooltipText = function (pointData) {\n    var series = pointData.series;\n    return this.parseTemplate(pointData.point, series, this.getFormat(this.chart, series), series.xAxis, series.yAxis);\n  };\n  Tooltip.prototype.getTemplateText = function (data) {\n    if (this.template && this.chart.tooltip.shared) {\n      var point = [];\n      for (var i = 0; i < data.length; i++) {\n        point[i] = extend({}, data[i].point);\n        point[i].x = this.formatPointValue(data[i].point, data[i].series.xAxis, 'x', true, false);\n        if (data[i].series.seriesType === 'XY') {\n          point[i].y = this.formatPointValue(data[i].point, data[i].series.yAxis, 'y', false, true);\n        } else {\n          point[i].low = this.formatPointValue(data[i].point, data[i].series.yAxis, 'low', false, true);\n          point[i].high = this.formatPointValue(data[i].point, data[i].series.yAxis, 'high', false, true);\n        }\n      }\n      return point;\n    } else if (this.template) {\n      var point = extend({}, data.point);\n      point.x = this.formatPointValue(data.point, data.series.xAxis, 'x', true, false);\n      if (data.series.seriesType === 'XY') {\n        point.y = this.formatPointValue(data.point, data.series.yAxis, 'y', false, true);\n      } else {\n        point.low = this.formatPointValue(data.point, data.series.yAxis, 'low', false, true);\n        point.high = this.formatPointValue(data.point, data.series.yAxis, 'high', false, true);\n      }\n      return point;\n    } else {\n      return data.point;\n    }\n  };\n  Tooltip.prototype.findMouseValue = function (data, chart) {\n    if (!chart.requireInvertedAxis) {\n      if (chart.chartAreaType === 'PolarRadar') {\n        this.valueX = valueToPolarCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width + data.series.xAxis.rect.x;\n      } else {\n        this.valueX = data.series.category === 'TrendLine' && chart.tooltip.shared ? this.valueX : valueToCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width + data.series.xAxis.rect.x;\n      }\n      this.valueY = chart.mouseY;\n    } else {\n      this.valueY = (1 - valueToCoefficient(data.point.xValue, data.series.xAxis)) * data.series.xAxis.rect.height + data.series.xAxis.rect.y;\n      this.valueX = chart.mouseX;\n    }\n  };\n  Tooltip.prototype.renderGroupedTooltip = function (chart, isFirst, tooltipDiv) {\n    var data;\n    var dataCollection = [];\n    var lastData;\n    var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n    this.stopAnimation();\n    this.removeHighlight();\n    this.currentPoints = [];\n    var extraPoints = [];\n    var closestXValue = Number.MAX_VALUE;\n    var closetYValue = Number.MAX_VALUE;\n    var pointXValue;\n    var pointYValue;\n    var tempData;\n    //let headerContent : string = '';\n    if (isFirst) {\n      if (!chart.stockChart) {\n        if (tooltipDiv) {\n          document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      } else {\n        if (tooltipDiv && !getElement(tooltipDiv.id)) {\n          document.getElementById(chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      }\n    }\n    this.removeText();\n    var argument = {\n      text: [],\n      cancel: false,\n      name: sharedTooltipRender,\n      data: [],\n      point: [],\n      series: [],\n      headerText: '',\n      textStyle: this.textStyle,\n      template: []\n    };\n    var i = 0;\n    for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n      var series = _a[_i];\n      if (!series.enableTooltip || !series.visible) {\n        continue;\n      }\n      if (chart.chartAreaType === 'Cartesian' && series.visible) {\n        data = this.getClosestX(chart, series, this.commonXValue(this.chart.visibleSeries));\n      } else if (chart.chartAreaType === 'PolarRadar' && series.visible && pointData.point !== null) {\n        data = new PointData(series.points[pointData.point.index], series);\n      }\n      // if (data && this.header !== '' && this.currentPoints.length === 0) {\n      //     headerContent = this.findHeader(data);\n      // }\n      if (chart.tooltip.showNearestPoint && !data) {\n        data = this.getClosestX(chart, series, this.commonXValue([series]));\n      }\n      if (data) {\n        argument.data.push({\n          pointX: data.point.x,\n          pointY: data.point.y,\n          seriesIndex: data.series.index,\n          seriesName: data.series.name,\n          pointIndex: data.point.index,\n          pointText: data.point.text\n        });\n        argument.series[i] = data.series;\n        argument.point[i] = data.point;\n        argument.headerText = this.findHeader(data);\n        this.currentPoints.push(data);\n        if (this.template != null) {\n          argument.template.push(this.template.toString());\n        }\n        argument.text.push(this.getTooltipText(data));\n        pointXValue = !chart.requireInvertedAxis ? chart.mouseX - data.series.clipRect.x : chart.mouseY - data.series.clipRect.y;\n        pointYValue = chart.mouseY - data.series.clipRect.y;\n        if (data.point.symbolLocations && data.point.symbolLocations.length && Math.abs(pointXValue - data.point.symbolLocations[0].x) <= closestXValue && Math.abs(data.point.symbolLocations[0].y - pointYValue) < Math.abs(closetYValue - pointYValue)) {\n          closestXValue = Math.abs(pointXValue - data.point.symbolLocations[0].x);\n          closetYValue = data.point.symbolLocations[0].y;\n          tempData = data;\n        }\n        lastData = data.series.category === 'TrendLine' && chart.tooltip.shared ? lastData : tempData || data;\n        dataCollection.push(data);\n      }\n      // if (data && this.triggerEvent(data, isFirst, this.getTooltipText(data)), this.findHeader(data)) {\n      //     this.findMouseValue(data, chart);\n      //     (<PointData[]>this.currentPoints).push(data);\n      //     data = null;\n      // } else if (data) {\n      //     extraPoints.push(data);\n      // }\n      i++;\n    }\n    if (!chart.tooltip.showNearestPoint) {\n      var collection = [];\n      this.currentPoints = [];\n      argument.point = [];\n      argument.series = [];\n      argument.data = [];\n      argument.text = [];\n      for (var _b = 0, dataCollection_1 = dataCollection; _b < dataCollection_1.length; _b++) {\n        var data_1 = dataCollection_1[_b];\n        if (data_1.point.symbolLocations[0].x === lastData.point.symbolLocations[0].x || (data_1.series.type.indexOf('Column') !== -1 || lastData.series.type.indexOf('Column') !== -1) && data_1.point.xValue === lastData.point.xValue) {\n          argument.point.push(data_1.point);\n          argument.series.push(data_1.series);\n          argument.text.push(this.getTooltipText(data_1));\n          argument.headerText = this.findHeader(data_1);\n          collection.push(data_1);\n          argument.data.push({\n            pointX: data_1.point.x,\n            pointY: data_1.point.y,\n            seriesIndex: data_1.series.index,\n            seriesName: data_1.series.name,\n            pointIndex: data_1.point.index,\n            pointText: data_1.point.text\n          });\n        }\n      }\n      dataCollection = collection;\n      this.currentPoints = collection;\n    }\n    if (dataCollection.length > 0 && this.currentPoints.length > 0) {\n      // To avoid console error when we have empty chart with shared tooltip.\n      this.triggerSharedTooltip(argument, lastData, extraPoints, chart, isFirst, dataCollection);\n    } else if (this.getElement(this.element.id + '_tooltip_path')) {\n      this.getElement(this.element.id + '_tooltip_path').setAttribute('d', '');\n    }\n  };\n  Tooltip.prototype.triggerSharedTooltip = function (argument, point, extraPoints, chart, isFirst, dataCollection) {\n    var _this = this;\n    var tooltipTemplate = argument.template;\n    var argsData = {\n      cancel: false,\n      name: sharedTooltipRender,\n      text: argument.text,\n      headerText: argument.headerText,\n      textStyle: argument.textStyle,\n      template: tooltipTemplate,\n      point: argument.point,\n      series: argument.series,\n      data: argument.data\n    };\n    var borderWidth = this.chart.border.width;\n    var padding = 3;\n    var toolbarHeight;\n    var titleHeight;\n    var currentPoints = [];\n    if (chart.stockChart) {\n      toolbarHeight = chart.stockChart.enablePeriodSelector ? chart.stockChart.toolbarHeight : 0;\n      titleHeight = measureText(this.chart.stockChart.title, this.chart.stockChart.titleStyle, this.chart.themeStyle.tooltipLabelFont).height + 10;\n    }\n    var sharedTooltip = function (argsData) {\n      if (!argsData.cancel) {\n        if (point.series.type === 'BoxAndWhisker') {\n          _this.removeText();\n          isFirst = true;\n        }\n        for (var i = 0; i < argsData.text.length; i++) {\n          if (argsData.text[i]) {\n            currentPoints.push(_this.currentPoints[i]);\n          }\n        }\n        _this.currentPoints = currentPoints;\n        _this.formattedText = _this.formattedText.concat(argsData.text);\n        _this.text = argsData.text;\n        _this.headerText = argsData.headerText;\n        if (typeof argsData.template != 'object') {\n          argsData.template = argsData.template.split(',');\n          if (argsData.template.length > currentPoints.length) {\n            argsData.template = argsData.template.splice(argsData.template.length - 1);\n          }\n        } else {\n          if (argsData.template.length > currentPoints.length) {\n            argsData.template.splice(argsData.template.length - 1);\n          }\n        }\n        var tooltip = _this.chart.tooltip;\n        _this.findMouseValue(point, _this.chart);\n        var location_2 = _this.findSharedLocation();\n        location_2 = location_2 ? location_2 : new ChartLocation(null, null);\n        location_2.x = tooltip.location.x !== null ? tooltip.location.x : location_2.x;\n        location_2.y = tooltip.location.y !== null ? tooltip.location.y : location_2.y;\n        location_2 = location_2.x === null && location_2.y === null ? null : location_2;\n        _this.createTooltip(chart, isFirst, location_2, _this.currentPoints.length === 1 ? _this.currentPoints[0].series.clipRect : null, dataCollection.length === 1 ? dataCollection[0].point : null, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), new Rect(borderWidth, chart.stockChart ? toolbarHeight + titleHeight + borderWidth : borderWidth, _this.chart.availableSize.width - padding - borderWidth * 2, _this.chart.availableSize.height - padding - borderWidth * 2), _this.chart.crosshair.enable, extraPoints, _this.template ? _this.getTemplateText(dataCollection) : null, _this.template ? argsData.template.join('') : '');\n        point = null;\n      } else {\n        removeElement(_this.element.id + '_tooltip');\n        extraPoints.push(point);\n      }\n    };\n    sharedTooltip.bind(this, point, extraPoints);\n    this.chart.trigger(sharedTooltipRender, argsData, sharedTooltip);\n  };\n  Tooltip.prototype.findSharedLocation = function () {\n    var stockChart = this.chart.stockChart;\n    if (stockChart) {\n      if (this.text.length === 1) {\n        this.text.push('');\n      }\n      var toolbarHeight = stockChart.enablePeriodSelector ? stockChart.toolbarHeight : 0;\n      var element = document.getElementById(stockChart.element.id + '_ChartTitle');\n      var titleHeight = stockChart.title !== '' ? element.getBoundingClientRect().height + 10 : 0;\n      if (stockChart.tooltip.position === 'Nearest') {\n        return new ChartLocation(this.valueX, this.valueY + toolbarHeight + titleHeight);\n      }\n      return new ChartLocation(this.chart.chartAxisLayoutPanel.seriesClipRect.x + 5, this.chart.chartAxisLayoutPanel.seriesClipRect.y + toolbarHeight + 5 + titleHeight);\n    } else {\n      if (this.currentPoints.length > 1) {\n        return new ChartLocation(this.valueX, this.valueY);\n      } else {\n        return this.getSymbolLocation(this.currentPoints[0]);\n      }\n    }\n  };\n  Tooltip.prototype.getBoxLocation = function (data) {\n    var location = this.lierIndex > 3 ? data.point.outliers.length > 0 ? data.point.symbolLocations[this.lierIndex - 4] : null : {\n      x: data.point.regions[0].x + data.point.regions[0].width / 2,\n      y: data.point.regions[0].y + data.point.regions[0].height / 2\n    };\n    return location;\n  };\n  Tooltip.prototype.parseTemplate = function (point, series, format, xAxis, yAxis) {\n    var val;\n    var textValue;\n    var regExp = RegExp;\n    for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n      var dataValue = _a[_i];\n      val = new regExp('${point' + '.' + dataValue + '}', 'gm');\n      format = format.replace(val.source, this.formatPointValue(point, val.source === '${point.x}' ? xAxis : yAxis, dataValue, val.source === '${point.x}', val.source === '${point.high}' || val.source === '${point.open}' || val.source === '${point.close}' || val.source === '${point.low}' || val.source === '${point.y}' || val.source === '${point.minimum}' || val.source === '${point.maximum}' || val.source === '${point.outliers}' || val.source === '${point.upperQuartile}' || val.source === '${point.lowerQuartile}' || val.source === '${point.median}'));\n    }\n    for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n      var dataValue = _c[_b];\n      val = new regExp('${series' + '.' + dataValue + '}', 'gm');\n      textValue = series[dataValue];\n      format = format.replace(val.source, textValue);\n    }\n    return format;\n  };\n  Tooltip.prototype.formatPointValue = function (point, axis, dataValue, isXPoint, isYPoint) {\n    var textValue;\n    var customLabelFormat;\n    var value;\n    if (axis.valueType !== 'Category' && isXPoint) {\n      customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      textValue = customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(point[dataValue])) : axis.format(point[dataValue]);\n    } else if (isYPoint && !isNullOrUndefined(point[dataValue])) {\n      customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      value = dataValue === 'outliers' ? axis.format(point[dataValue][this.lierIndex - 4]) : axis.format(point[dataValue]);\n      textValue = customLabelFormat ? axis.labelFormat.replace('{value}', value) : value;\n    } else if (dataValue === 'size') {\n      var format = this.chart.intl.getNumberFormat({\n        format: '',\n        useGrouping: this.chart.useGroupingSeparator\n      });\n      textValue = typeof point[dataValue] === 'number' ? format(point[dataValue]) : point[dataValue];\n    } else {\n      textValue = point[dataValue];\n    }\n    return textValue;\n  };\n  Tooltip.prototype.getFormat = function (chart, series) {\n    if (series.tooltipFormat) {\n      if (series.seriesType === 'XY' && series.category === 'Indicator') {\n        return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n      }\n      return series.tooltipFormat;\n    }\n    if (!series.tooltipFormat && chart.tooltip.format) {\n      if (series.seriesType === 'XY' && series.category === 'Indicator') {\n        return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n      }\n      return chart.tooltip.format;\n    }\n    var textX = series.type === 'Histogram' ? '${point.minimum}' + '-' + '${point.maximum}' : '${point.x}';\n    var format = !chart.tooltip.shared ? textX : '${series.name}';\n    switch (series.seriesType) {\n      case 'XY':\n        if (series.category === 'Indicator') {\n          this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n        }\n        return format + ' : ' + (series.type === 'Bubble' ? '<b>${point.y}</b>  Size : <b>${point.size}</b>' : '<b>${point.y}</b>');\n      case 'HighLow':\n        return format + '<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>';\n      case 'HighLowOpenClose':\n        return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>' + 'Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>');\n      case 'BoxPlot':\n        {\n          return format + '<br/>' + (this.lierIndex > 3 ? 'Outliers : <b>${point.outliers}</b>' : 'Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>' + 'Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>');\n        }\n      default:\n        return '';\n    }\n  };\n  Tooltip.prototype.getIndicatorTooltipFormat = function (series, chart, format) {\n    var toolTip;\n    if (series.seriesType === 'XY') {\n      toolTip = series.name + ' : <b>${point.y}</b>';\n    } else {\n      toolTip = format;\n    }\n    return toolTip;\n  };\n  /*\r\n  * @hidden\r\n  */\n  Tooltip.prototype.removeHighlightedMarker = function (data, fadeOut) {\n    for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n      var item = data_2[_i];\n      removeElement(this.element.id + '_Series_' + item.series.index + '_Point_' + item.point.index + '_Trackball');\n      if (this.chart.markerRender) {\n        this.chart.markerRender.removeHighlightedMarker(item.series, item.point, fadeOut);\n      }\n    }\n    this.previousPoints = [];\n  };\n  /**\r\n   * Get module name.\r\n   *\r\n   * @returns {string} - Returns the module name.\r\n   */\n  Tooltip.prototype.getModuleName = function () {\n    /**\r\n     * Returns the module name\r\n     */\n    return 'Tooltip';\n  };\n  /**\r\n   * To destroy the tooltip.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n  Tooltip.prototype.destroy = function () {\n    /**\r\n     * Destroy method performed here\r\n     */\n  };\n  return Tooltip;\n}(BaseTooltip);\nexport { Tooltip };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","Browser","remove","PointData","ChartLocation","getElement","measureText","Rect","valueToCoefficient","removeElement","valueToPolarCoefficient","withInBounds","BaseTooltip","tooltipRender","sharedTooltipRender","isNullOrUndefined","Tooltip","_super","chart","_this","call","commonXvalues","addEventListener","isDestroyed","cancelEvent","isPointer","on","mouseLeaveHandler","longPress","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","control","data","getData","lierIndex","isTouch","isSelected","mouseX","mouseY","chartAxisLayoutPanel","seriesClipRect","tooltip","shared","crosshair","enable","fadeOutMode","removeTooltip","fadeOutDuration","startMove","findData","previousPoints","stockChart","onPanning","y","height","disableTrackTooltip","markerRender","markerMove","elementId","enableCanvas","element","id","svgElement","isStockSvg","firstChild","childNodes","length","isTooltip","parseInt","getAttribute","tooltipDiv","getTooltipElement","document","getElementById","appendChild","renderSeriesTooltip","renderGroupedTooltip","findHeader","header","parseTemplate","point","series","xAxis","yAxis","replace","trim","findShapes","enableMarker","marker","_i","_a","currentPoints","push","shape","isFirst","dataEditingModule","isPointDragging","index","pushData","triggerTooltipRender","getTooltipText","isRemove","mergeXvalues","visibleSeries","visible","category","getClosestX","findMouseValue","textCollection","headerText","tooltipTemplate","argsData","cancel","name","text","template","isBlazor","textStyle","pointX","x","pointY","seriesIndex","seriesName","pointIndex","pointText","borderWidth","border","width","padding","chartTooltipSuccess","type","removeText","formattedText","concat","location_1","getSymbolLocation","location","createTooltip","clipRect","findMarkerHeight","availableSize","getTemplateText","removeHighlight","bind","trigger","pointData","markerHeight","isRectSeries","drawType","previous","symbolLocations","getBoxLocation","getWaterfallRegion","getRangeArea","regions","inverted","getFormat","i","formatPointValue","seriesType","low","high","requireInvertedAxis","chartAreaType","valueX","xValue","rect","valueY","dataCollection","lastData","stopAnimation","extraPoints","closestXValue","Number","MAX_VALUE","closetYValue","pointXValue","pointYValue","tempData","argument","enableTooltip","commonXValue","points","showNearestPoint","toString","Math","abs","collection","_b","dataCollection_1","data_1","indexOf","triggerSharedTooltip","setAttribute","toolbarHeight","titleHeight","enablePeriodSelector","title","titleStyle","themeStyle","tooltipLabelFont","sharedTooltip","split","splice","location_2","findSharedLocation","join","getBoundingClientRect","position","outliers","format","val","textValue","regExp","RegExp","keys","dataValue","source","_c","getPrototypeOf","axis","isXPoint","isYPoint","customLabelFormat","value","valueType","labelFormat","match","intl","getNumberFormat","useGrouping","useGroupingSeparator","tooltipFormat","getIndicatorTooltipFormat","textX","toolTip","removeHighlightedMarker","fadeOut","data_2","item","getModuleName","destroy"],"sources":["C:/Users/wiliam/Desktop/indiec-nuevo/fronted-vue/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/tooltip.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { extend, Browser, remove } from '@syncfusion/ej2-base';\r\nimport { PointData, ChartLocation } from '../../common/utils/helper';\r\nimport { getElement, measureText, Rect } from '@syncfusion/ej2-svg-base';\r\nimport { valueToCoefficient, removeElement, valueToPolarCoefficient, withInBounds } from '../../common/utils/helper';\r\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\r\nimport { tooltipRender, sharedTooltipRender } from '../../common/model/constants';\r\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\r\n/**\r\n * `Tooltip` module is used to render the tooltip for chart series.\r\n */\r\nvar Tooltip = /** @class */ (function (_super) {\r\n    __extends(Tooltip, _super);\r\n    /**\r\n     * Constructor for the Touch module.\r\n     *\r\n     * @param {Chart} chart - The chart instance.\r\n     */\r\n    function Tooltip(chart) {\r\n        var _this = _super.call(this, chart) || this;\r\n        _this.commonXvalues = [];\r\n        _this.addEventListener();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Adds event listeners for the chart.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Tooltip.prototype.addEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\r\n        this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\r\n        this.chart.on('tapHold', this.longPress, this);\r\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\r\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\r\n    };\r\n    Tooltip.prototype.mouseUpHandler = function () {\r\n        var chart = this.control;\r\n        var data = this.getData();\r\n        data.lierIndex = this.lierIndex;\r\n        if (chart.isTouch && !this.isSelected(chart) &&\r\n            ((withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect) && chart.tooltip.shared)\r\n                || !chart.tooltip.shared)) {\r\n            if (!chart.crosshair.enable) {\r\n                this.tooltip();\r\n                if (chart.tooltip.fadeOutMode === 'Move') {\r\n                    this.removeTooltip(chart.tooltip.fadeOutDuration);\r\n                }\r\n            }\r\n            else if (chart.startMove && chart.tooltip.fadeOutMode === 'Move') {\r\n                this.removeTooltip(2000);\r\n            }\r\n        }\r\n        else if (!this.findData(data, this.previousPoints[0]) && chart.tooltip.fadeOutMode === 'Click') {\r\n            this.removeTooltip(0);\r\n        }\r\n    };\r\n    Tooltip.prototype.mouseLeaveHandler = function () {\r\n        this.removeTooltip(this.chart.tooltip.fadeOutDuration);\r\n    };\r\n    Tooltip.prototype.mouseMoveHandler = function () {\r\n        var chart = this.chart;\r\n        if (chart.stockChart && chart.stockChart.onPanning) {\r\n            if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\r\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\r\n            }\r\n            else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\r\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\r\n            }\r\n        }\r\n        // Tooltip for chart series.\r\n        if (!chart.disableTrackTooltip && !this.isSelected(chart)) {\r\n            if (!chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\r\n                this.tooltip();\r\n            }\r\n            if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\r\n                if (chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\r\n                    this.tooltip();\r\n                }\r\n            }\r\n            else {\r\n                if (chart.tooltip.shared && chart.tooltip.fadeOutMode === 'Move') {\r\n                    this.removeTooltip(this.chart.tooltip.fadeOutDuration);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Handles the long press on chart.\r\n     *\r\n     * @returns {boolean} false\r\n     * @private\r\n     */\r\n    Tooltip.prototype.longPress = function () {\r\n        var chart = this.chart;\r\n        if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\r\n            this.tooltip();\r\n            chart.markerRender.markerMove(false);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Renders the tooltip.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Tooltip.prototype.tooltip = function () {\r\n        var elementId = this.chart.enableCanvas ? this.element.id + '_tooltip_group' : this.element.id + '_tooltip_svg';\r\n        var svgElement = this.getElement(elementId);\r\n        // To prevent the disappearance of the tooltip, while resize the stock chart.\r\n        var isStockSvg = this.chart.stockChart && svgElement && (svgElement.firstChild.childNodes.length > 1);\r\n        var isTooltip = (svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0 && !isStockSvg);\r\n        var tooltipDiv = this.getTooltipElement(isTooltip);\r\n        if (this.chart.enableCanvas && tooltipDiv) {\r\n            document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\r\n            tooltipDiv.appendChild(document.getElementById(this.chart.element.id + '_tooltip_svg'));\r\n        }\r\n        if (!this.chart.tooltip.shared) {\r\n            this.renderSeriesTooltip(this.chart, !isTooltip, tooltipDiv);\r\n        }\r\n        else {\r\n            this.renderGroupedTooltip(this.chart, !isTooltip, tooltipDiv);\r\n        }\r\n    };\r\n    Tooltip.prototype.findHeader = function (data) {\r\n        if (this.header === '') {\r\n            return '';\r\n        }\r\n        this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\r\n        if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\r\n            return this.header;\r\n        }\r\n        return '';\r\n    };\r\n    Tooltip.prototype.findShapes = function () {\r\n        if (!this.chart.tooltip.enableMarker) {\r\n            return [];\r\n        }\r\n        var marker = [];\r\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\r\n            var data = _a[_i];\r\n            marker.push(data.point.marker.shape || data.series.marker.shape || 'Circle');\r\n        }\r\n        return marker;\r\n    };\r\n    Tooltip.prototype.renderSeriesTooltip = function (chart, isFirst, tooltipDiv) {\r\n        var data = this.getData();\r\n        data.lierIndex = this.lierIndex;\r\n        this.currentPoints = [];\r\n        if (this.findData(data, this.previousPoints[0])) {\r\n            if (!(chart.dataEditingModule && chart.dataEditingModule.isPointDragging) && (this.previousPoints[0] &&\r\n                data.point.index === this.previousPoints[0].point.index && data.series.index === this.previousPoints[0].series.index)) {\r\n                return null;\r\n            }\r\n            if (this.pushData(data, isFirst, tooltipDiv, true)) {\r\n                this.triggerTooltipRender(data, isFirst, this.getTooltipText(data), this.findHeader(data));\r\n            }\r\n        }\r\n        else {\r\n            if (!data.point && this.isRemove && chart.tooltip.fadeOutMode === 'Move') {\r\n                this.removeTooltip(this.chart.tooltip.fadeOutDuration);\r\n                this.isRemove = false;\r\n            }\r\n            else {\r\n                var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\r\n                for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\r\n                    var series = _a[_i];\r\n                    if (series.visible && !(series.category === 'TrendLine')) {\r\n                        data = this.getClosestX(chart, series, commonXvalues) || data;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (data && data.point) {\r\n            this.findMouseValue(data, chart);\r\n        }\r\n    };\r\n    Tooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText) {\r\n        var _this = this;\r\n        var tooltipTemplate;\r\n        var argsData = {\r\n            cancel: false, name: tooltipRender, text: textCollection, headerText: headerText, template: tooltipTemplate,\r\n            series: this.chart.isBlazor ? {} : point.series, textStyle: this.textStyle, point: point.point,\r\n            data: { pointX: point.point.x, pointY: point.point.y, seriesIndex: point.series.index, seriesName: point.series.name,\r\n                pointIndex: point.point.index, pointText: point.point.text }\r\n        };\r\n        var borderWidth = this.chart.border.width;\r\n        var padding = 3;\r\n        var tooltip = this.chart.tooltip;\r\n        var chartTooltipSuccess = function (argsData) {\r\n            if (!argsData.cancel) {\r\n                if (point.series.type === 'BoxAndWhisker') {\r\n                    _this.removeText();\r\n                    isFirst = true;\r\n                }\r\n                _this.headerText = argsData.headerText;\r\n                _this.formattedText = _this.formattedText.concat(argsData.text);\r\n                _this.text = _this.formattedText;\r\n                var location_1 = _this.getSymbolLocation(point);\r\n                location_1 = location_1 ? location_1 : new ChartLocation(null, null);\r\n                location_1.x = tooltip.location.x !== null ? tooltip.location.x : location_1.x;\r\n                location_1.y = tooltip.location.y !== null ? tooltip.location.y : location_1.y;\r\n                location_1 = (location_1.x === null && location_1.y === null) ? null : location_1;\r\n                _this.createTooltip(_this.chart, isFirst, location_1, point.series.clipRect, point.point, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), new Rect(borderWidth, borderWidth, _this.chart.availableSize.width - padding - borderWidth * 2, _this.chart.availableSize.height - padding - borderWidth * 2), _this.chart.crosshair.enable, null, _this.getTemplateText(point), _this.template ? argsData.template : '');\r\n            }\r\n            else {\r\n                _this.removeHighlight();\r\n                remove(_this.getElement(_this.element.id + '_tooltip'));\r\n            }\r\n            _this.isRemove = true;\r\n        };\r\n        chartTooltipSuccess.bind(this, point);\r\n        this.chart.trigger(tooltipRender, argsData, chartTooltipSuccess);\r\n    };\r\n    Tooltip.prototype.findMarkerHeight = function (pointData) {\r\n        var markerHeight = 0;\r\n        var series = pointData.series;\r\n        markerHeight = ((series.marker.visible || (this.chart.tooltip.shared &&\r\n            (!series.isRectSeries || series.marker.visible)) || series.type === 'Scatter' || series.drawType === 'Scatter')\r\n            && !(series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) ?\r\n            ((series.marker.height + 2) / 2 + (2 * series.marker.border.width)) : 0;\r\n        return markerHeight;\r\n    };\r\n    Tooltip.prototype.findData = function (data, previous) {\r\n        return data.point && ((!previous || (previous.point !== data.point)) ||\r\n            (previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex) || (previous.point === data.point));\r\n    };\r\n    Tooltip.prototype.getSymbolLocation = function (data) {\r\n        var location;\r\n        if (data.series.type !== 'BoxAndWhisker') {\r\n            if (!data.point.symbolLocations[0]) {\r\n                return null;\r\n            }\r\n            location = new ChartLocation(data.point.symbolLocations[0].x, data.point.symbolLocations[0].y);\r\n        }\r\n        switch (data.series.type) {\r\n            case 'BoxAndWhisker':\r\n                return this.getBoxLocation(data);\r\n            case 'Waterfall':\r\n                return this.getWaterfallRegion(data, location);\r\n            case 'RangeArea':\r\n            case 'RangeStepArea':\r\n            case 'SplineRangeArea':\r\n            case 'RangeColumn':\r\n                return this.getRangeArea(data, location);\r\n            default:\r\n                return location;\r\n        }\r\n    };\r\n    Tooltip.prototype.getRangeArea = function (data, location) {\r\n        if (data.point.regions[0]) {\r\n            if (!this.inverted) {\r\n                location.y = data.point.regions[0].y + data.point.regions[0].height / 2;\r\n            }\r\n            else {\r\n                location.x = data.point.regions[0].x + data.point.regions[0].width / 2;\r\n            }\r\n            if (data.series.type === 'RangeStepArea') {\r\n                location.y = data.point.regions[0].y + data.point.regions[0].height / 2 + data.point.regions[0].width;\r\n            }\r\n        }\r\n        return location;\r\n    };\r\n    Tooltip.prototype.getWaterfallRegion = function (data, location) {\r\n        if (!this.inverted) {\r\n            location.y = (data.point.y < 0) ?\r\n                location.y - data.point.regions[0].height : location.y;\r\n        }\r\n        else {\r\n            location.x = (data.point.y < 0) ?\r\n                location.x + data.point.regions[0].width : location.x;\r\n        }\r\n        return location;\r\n    };\r\n    Tooltip.prototype.getTooltipText = function (pointData) {\r\n        var series = pointData.series;\r\n        return this.parseTemplate(pointData.point, series, this.getFormat(this.chart, series), series.xAxis, series.yAxis);\r\n    };\r\n    Tooltip.prototype.getTemplateText = function (data) {\r\n        if (this.template && this.chart.tooltip.shared) {\r\n            var point = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                point[i] = extend({}, data[i].point);\r\n                point[i].x = this.formatPointValue(data[i].point, data[i].series.xAxis, 'x', true, false);\r\n                if ((data[i].series.seriesType === 'XY')) {\r\n                    point[i].y = this.formatPointValue(data[i].point, data[i].series.yAxis, 'y', false, true);\r\n                }\r\n                else {\r\n                    point[i].low = this.formatPointValue(data[i].point, data[i].series.yAxis, 'low', false, true);\r\n                    point[i].high = this.formatPointValue(data[i].point, data[i].series.yAxis, 'high', false, true);\r\n                }\r\n            }\r\n            return point;\r\n        }\r\n        else if (this.template) {\r\n            var point = extend({}, data.point);\r\n            point.x = this.formatPointValue(data.point, data.series.xAxis, 'x', true, false);\r\n            if ((data.series.seriesType === 'XY')) {\r\n                point.y = this.formatPointValue(data.point, data.series.yAxis, 'y', false, true);\r\n            }\r\n            else {\r\n                point.low = this.formatPointValue(data.point, data.series.yAxis, 'low', false, true);\r\n                point.high = this.formatPointValue(data.point, data.series.yAxis, 'high', false, true);\r\n            }\r\n            return point;\r\n        }\r\n        else {\r\n            return data.point;\r\n        }\r\n    };\r\n    Tooltip.prototype.findMouseValue = function (data, chart) {\r\n        if (!chart.requireInvertedAxis) {\r\n            if (chart.chartAreaType === 'PolarRadar') {\r\n                this.valueX = valueToPolarCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\r\n                    + data.series.xAxis.rect.x;\r\n            }\r\n            else {\r\n                this.valueX = (data.series.category === 'TrendLine' && chart.tooltip.shared) ? this.valueX :\r\n                    valueToCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\r\n                        + data.series.xAxis.rect.x;\r\n            }\r\n            this.valueY = chart.mouseY;\r\n        }\r\n        else {\r\n            this.valueY = (1 - valueToCoefficient(data.point.xValue, data.series.xAxis)) * data.series.xAxis.rect.height\r\n                + data.series.xAxis.rect.y;\r\n            this.valueX = chart.mouseX;\r\n        }\r\n    };\r\n    Tooltip.prototype.renderGroupedTooltip = function (chart, isFirst, tooltipDiv) {\r\n        var data;\r\n        var dataCollection = [];\r\n        var lastData;\r\n        var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\r\n        this.stopAnimation();\r\n        this.removeHighlight();\r\n        this.currentPoints = [];\r\n        var extraPoints = [];\r\n        var closestXValue = Number.MAX_VALUE;\r\n        var closetYValue = Number.MAX_VALUE;\r\n        var pointXValue;\r\n        var pointYValue;\r\n        var tempData;\r\n        //let headerContent : string = '';\r\n        if (isFirst) {\r\n            if (!chart.stockChart) {\r\n                if (tooltipDiv) {\r\n                    document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\r\n                }\r\n            }\r\n            else {\r\n                if (tooltipDiv && !getElement(tooltipDiv.id)) {\r\n                    document.getElementById(chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\r\n                }\r\n            }\r\n        }\r\n        this.removeText();\r\n        var argument = {\r\n            text: [], cancel: false, name: sharedTooltipRender, data: [], point: [], series: [], headerText: '', textStyle: this.textStyle, template: []\r\n        };\r\n        var i = 0;\r\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\r\n            var series = _a[_i];\r\n            if (!series.enableTooltip || !series.visible) {\r\n                continue;\r\n            }\r\n            if (chart.chartAreaType === 'Cartesian' && series.visible) {\r\n                data = this.getClosestX(chart, series, this.commonXValue(this.chart.visibleSeries));\r\n            }\r\n            else if (chart.chartAreaType === 'PolarRadar' && series.visible && pointData.point !== null) {\r\n                data = new PointData(series.points[pointData.point.index], series);\r\n            }\r\n            // if (data && this.header !== '' && this.currentPoints.length === 0) {\r\n            //     headerContent = this.findHeader(data);\r\n            // }\r\n            if (chart.tooltip.showNearestPoint && !data) {\r\n                data = this.getClosestX(chart, series, this.commonXValue([series]));\r\n            }\r\n            if (data) {\r\n                argument.data.push({ pointX: data.point.x, pointY: data.point.y, seriesIndex: data.series.index,\r\n                    seriesName: data.series.name, pointIndex: data.point.index, pointText: data.point.text });\r\n                argument.series[i] = data.series;\r\n                argument.point[i] = data.point;\r\n                argument.headerText = this.findHeader(data);\r\n                this.currentPoints.push(data);\r\n                if (this.template != null) {\r\n                    argument.template.push(this.template.toString());\r\n                }\r\n                argument.text.push(this.getTooltipText(data));\r\n                pointXValue = (!chart.requireInvertedAxis) ? chart.mouseX - data.series.clipRect.x : chart.mouseY - data.series.clipRect.y;\r\n                pointYValue = chart.mouseY - data.series.clipRect.y;\r\n                if (data.point.symbolLocations && data.point.symbolLocations.length &&\r\n                    Math.abs(pointXValue - data.point.symbolLocations[0].x) <= closestXValue &&\r\n                    Math.abs(data.point.symbolLocations[0].y - pointYValue) < Math.abs(closetYValue - pointYValue)) {\r\n                    closestXValue = Math.abs(pointXValue - data.point.symbolLocations[0].x);\r\n                    closetYValue = data.point.symbolLocations[0].y;\r\n                    tempData = data;\r\n                }\r\n                lastData = (data.series.category === 'TrendLine' && chart.tooltip.shared) ? lastData : tempData || data;\r\n                dataCollection.push(data);\r\n            }\r\n            // if (data && this.triggerEvent(data, isFirst, this.getTooltipText(data)), this.findHeader(data)) {\r\n            //     this.findMouseValue(data, chart);\r\n            //     (<PointData[]>this.currentPoints).push(data);\r\n            //     data = null;\r\n            // } else if (data) {\r\n            //     extraPoints.push(data);\r\n            // }\r\n            i++;\r\n        }\r\n        if (!chart.tooltip.showNearestPoint) {\r\n            var collection = [];\r\n            this.currentPoints = [];\r\n            argument.point = [];\r\n            argument.series = [];\r\n            argument.data = [];\r\n            argument.text = [];\r\n            for (var _b = 0, dataCollection_1 = dataCollection; _b < dataCollection_1.length; _b++) {\r\n                var data_1 = dataCollection_1[_b];\r\n                if (data_1.point.symbolLocations[0].x === lastData.point.symbolLocations[0].x || ((data_1.series.type.indexOf('Column') !== -1 || lastData.series.type.indexOf('Column') !== -1) && (data_1.point.xValue === lastData.point.xValue))) {\r\n                    argument.point.push(data_1.point);\r\n                    argument.series.push(data_1.series);\r\n                    argument.text.push(this.getTooltipText(data_1));\r\n                    argument.headerText = this.findHeader(data_1);\r\n                    collection.push(data_1);\r\n                    argument.data.push({\r\n                        pointX: data_1.point.x, pointY: data_1.point.y, seriesIndex: data_1.series.index,\r\n                        seriesName: data_1.series.name, pointIndex: data_1.point.index, pointText: data_1.point.text\r\n                    });\r\n                }\r\n            }\r\n            dataCollection = collection;\r\n            this.currentPoints = collection;\r\n        }\r\n        if (dataCollection.length > 0 && this.currentPoints.length > 0) { // To avoid console error when we have empty chart with shared tooltip.\r\n            this.triggerSharedTooltip(argument, lastData, extraPoints, chart, isFirst, dataCollection);\r\n        }\r\n        else if (this.getElement(this.element.id + '_tooltip_path')) {\r\n            this.getElement(this.element.id + '_tooltip_path').setAttribute('d', '');\r\n        }\r\n    };\r\n    Tooltip.prototype.triggerSharedTooltip = function (argument, point, extraPoints, chart, isFirst, dataCollection) {\r\n        var _this = this;\r\n        var tooltipTemplate = argument.template;\r\n        var argsData = {\r\n            cancel: false, name: sharedTooltipRender, text: argument.text, headerText: argument.headerText,\r\n            textStyle: argument.textStyle, template: tooltipTemplate,\r\n            point: argument.point, series: argument.series,\r\n            data: argument.data\r\n        };\r\n        var borderWidth = this.chart.border.width;\r\n        var padding = 3;\r\n        var toolbarHeight;\r\n        var titleHeight;\r\n        var currentPoints = [];\r\n        if (chart.stockChart) {\r\n            toolbarHeight = chart.stockChart.enablePeriodSelector ? chart.stockChart.toolbarHeight : 0;\r\n            titleHeight = measureText(this.chart.stockChart.title, this.chart.stockChart.titleStyle, this.chart.themeStyle.tooltipLabelFont).height + 10;\r\n        }\r\n        var sharedTooltip = function (argsData) {\r\n            if (!argsData.cancel) {\r\n                if (point.series.type === 'BoxAndWhisker') {\r\n                    _this.removeText();\r\n                    isFirst = true;\r\n                }\r\n                for (var i = 0; i < argsData.text.length; i++) {\r\n                    if (argsData.text[i]) {\r\n                        currentPoints.push(_this.currentPoints[i]);\r\n                    }\r\n                }\r\n                _this.currentPoints = currentPoints;\r\n                _this.formattedText = _this.formattedText.concat(argsData.text);\r\n                _this.text = argsData.text;\r\n                _this.headerText = argsData.headerText;\r\n                if (typeof (argsData.template) != 'object') {\r\n                    argsData.template = argsData.template.split(',');\r\n                    if (argsData.template.length > currentPoints.length) {\r\n                        argsData.template = argsData.template.splice(argsData.template.length - 1);\r\n                    }\r\n                }\r\n                else {\r\n                    if (argsData.template.length > currentPoints.length) {\r\n                        argsData.template.splice(argsData.template.length - 1);\r\n                    }\r\n                }\r\n                var tooltip = _this.chart.tooltip;\r\n                _this.findMouseValue(point, _this.chart);\r\n                var location_2 = _this.findSharedLocation();\r\n                location_2 = location_2 ? location_2 : new ChartLocation(null, null);\r\n                location_2.x = tooltip.location.x !== null ? tooltip.location.x : location_2.x;\r\n                location_2.y = tooltip.location.y !== null ? tooltip.location.y : location_2.y;\r\n                location_2 = (location_2.x === null && location_2.y === null) ? null : location_2;\r\n                _this.createTooltip(chart, isFirst, location_2, _this.currentPoints.length === 1 ? _this.currentPoints[0].series.clipRect : null, dataCollection.length === 1 ? dataCollection[0].point : null, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), new Rect(borderWidth, (chart.stockChart ? (toolbarHeight + titleHeight + borderWidth) : borderWidth), _this.chart.availableSize.width - padding - borderWidth * 2, _this.chart.availableSize.height - padding - borderWidth * 2), _this.chart.crosshair.enable, extraPoints, _this.template ? _this.getTemplateText(dataCollection) : null, _this.template ? argsData.template.join('') : '');\r\n                point = null;\r\n            }\r\n            else {\r\n                removeElement(_this.element.id + '_tooltip');\r\n                extraPoints.push(point);\r\n            }\r\n        };\r\n        sharedTooltip.bind(this, point, extraPoints);\r\n        this.chart.trigger(sharedTooltipRender, argsData, sharedTooltip);\r\n    };\r\n    Tooltip.prototype.findSharedLocation = function () {\r\n        var stockChart = this.chart.stockChart;\r\n        if (stockChart) {\r\n            if (this.text.length === 1) {\r\n                this.text.push('');\r\n            }\r\n            var toolbarHeight = stockChart.enablePeriodSelector ? stockChart.toolbarHeight : 0;\r\n            var element = document.getElementById(stockChart.element.id + '_ChartTitle');\r\n            var titleHeight = stockChart.title !== '' ? element.getBoundingClientRect().height + 10 : 0;\r\n            if (stockChart.tooltip.position === 'Nearest') {\r\n                return new ChartLocation(this.valueX, this.valueY + toolbarHeight + titleHeight);\r\n            }\r\n            return new ChartLocation(this.chart.chartAxisLayoutPanel.seriesClipRect.x + 5, this.chart.chartAxisLayoutPanel.seriesClipRect.y + toolbarHeight + 5 + titleHeight);\r\n        }\r\n        else {\r\n            if (this.currentPoints.length > 1) {\r\n                return new ChartLocation(this.valueX, this.valueY);\r\n            }\r\n            else {\r\n                return this.getSymbolLocation(this.currentPoints[0]);\r\n            }\r\n        }\r\n    };\r\n    Tooltip.prototype.getBoxLocation = function (data) {\r\n        var location = this.lierIndex > 3 ? (data.point.outliers.length > 0 ?\r\n            data.point.symbolLocations[this.lierIndex - 4] : null) :\r\n            {\r\n                x: data.point.regions[0].x + (data.point.regions[0].width / 2),\r\n                y: data.point.regions[0].y + (data.point.regions[0].height / 2)\r\n            };\r\n        return location;\r\n    };\r\n    Tooltip.prototype.parseTemplate = function (point, series, format, xAxis, yAxis) {\r\n        var val;\r\n        var textValue;\r\n        var regExp = RegExp;\r\n        for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\r\n            var dataValue = _a[_i];\r\n            val = new regExp('${point' + '.' + dataValue + '}', 'gm');\r\n            format = format.replace(val.source, this.formatPointValue(point, val.source === '${point.x}' ? xAxis : yAxis, dataValue, val.source === '${point.x}', (val.source === '${point.high}' ||\r\n                val.source === '${point.open}' ||\r\n                val.source === '${point.close}' ||\r\n                val.source === '${point.low}' ||\r\n                val.source === '${point.y}' ||\r\n                val.source === '${point.minimum}' ||\r\n                val.source === '${point.maximum}' ||\r\n                val.source === '${point.outliers}' ||\r\n                val.source === '${point.upperQuartile}' ||\r\n                val.source === '${point.lowerQuartile}' ||\r\n                val.source === '${point.median}')));\r\n        }\r\n        for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\r\n            var dataValue = _c[_b];\r\n            val = new regExp('${series' + '.' + dataValue + '}', 'gm');\r\n            textValue = series[dataValue];\r\n            format = format.replace(val.source, textValue);\r\n        }\r\n        return format;\r\n    };\r\n    Tooltip.prototype.formatPointValue = function (point, axis, dataValue, isXPoint, isYPoint) {\r\n        var textValue;\r\n        var customLabelFormat;\r\n        var value;\r\n        if (axis.valueType !== 'Category' && isXPoint) {\r\n            customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\r\n            textValue = customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(point[dataValue])) :\r\n                axis.format(point[dataValue]);\r\n        }\r\n        else if (isYPoint && !isNullOrUndefined(point[dataValue])) {\r\n            customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\r\n            value = dataValue === 'outliers' ? axis.format(point[dataValue][this.lierIndex - 4]) :\r\n                axis.format(point[dataValue]);\r\n            textValue = customLabelFormat ? axis.labelFormat.replace('{value}', value) : value;\r\n        }\r\n        else if (dataValue === 'size') {\r\n            var format = this.chart.intl.getNumberFormat({ format: '', useGrouping: this.chart.useGroupingSeparator });\r\n            textValue = typeof point[dataValue] === 'number' ? format(point[dataValue]) : point[dataValue];\r\n        }\r\n        else {\r\n            textValue = point[dataValue];\r\n        }\r\n        return textValue;\r\n    };\r\n    Tooltip.prototype.getFormat = function (chart, series) {\r\n        if (series.tooltipFormat) {\r\n            if (series.seriesType === 'XY' && series.category === 'Indicator') {\r\n                return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\r\n            }\r\n            return series.tooltipFormat;\r\n        }\r\n        if (!series.tooltipFormat && chart.tooltip.format) {\r\n            if (series.seriesType === 'XY' && series.category === 'Indicator') {\r\n                return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\r\n            }\r\n            return chart.tooltip.format;\r\n        }\r\n        var textX = (series.type === 'Histogram') ? '${point.minimum}' + '-' + '${point.maximum}' : '${point.x}';\r\n        var format = !chart.tooltip.shared ? textX : '${series.name}';\r\n        switch (series.seriesType) {\r\n            case 'XY':\r\n                if (series.category === 'Indicator') {\r\n                    this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\r\n                }\r\n                return format + ' : ' + ((series.type === 'Bubble') ? '<b>${point.y}</b>  Size : <b>${point.size}</b>' :\r\n                    '<b>${point.y}</b>');\r\n            case 'HighLow':\r\n                return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>');\r\n            case 'HighLowOpenClose':\r\n                return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>' +\r\n                    'Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>');\r\n            case 'BoxPlot': {\r\n                return format + '<br/>' + (this.lierIndex > 3 ? 'Outliers : <b>${point.outliers}</b>' :\r\n                    'Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>' +\r\n                        'Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>');\r\n            }\r\n            default: return '';\r\n        }\r\n    };\r\n    Tooltip.prototype.getIndicatorTooltipFormat = function (series, chart, format) {\r\n        var toolTip;\r\n        if (series.seriesType === 'XY') {\r\n            toolTip = series.name + ' : <b>${point.y}</b>';\r\n        }\r\n        else {\r\n            toolTip = format;\r\n        }\r\n        return toolTip;\r\n    };\r\n    /*\r\n    * @hidden\r\n    */\r\n    Tooltip.prototype.removeHighlightedMarker = function (data, fadeOut) {\r\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\r\n            var item = data_2[_i];\r\n            removeElement(this.element.id + '_Series_' + item.series.index +\r\n                '_Point_' + item.point.index + '_Trackball');\r\n            if (this.chart.markerRender) {\r\n                this.chart.markerRender.removeHighlightedMarker(item.series, item.point, fadeOut);\r\n            }\r\n        }\r\n        this.previousPoints = [];\r\n    };\r\n    /**\r\n     * Get module name.\r\n     *\r\n     * @returns {string} - Returns the module name.\r\n     */\r\n    Tooltip.prototype.getModuleName = function () {\r\n        /**\r\n         * Returns the module name\r\n         */\r\n        return 'Tooltip';\r\n    };\r\n    /**\r\n     * To destroy the tooltip.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Tooltip.prototype.destroy = function () {\r\n        /**\r\n         * Destroy method performed here\r\n         */\r\n    };\r\n    return Tooltip;\r\n}(BaseTooltip));\r\nexport { Tooltip };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}