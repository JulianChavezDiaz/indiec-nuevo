{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { titlePositionX, textElement, appendChildElement, getElement, RectOption } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\r\n * Period selector for range navigator\r\n */\n/** @private */\nvar ToolBarSelector = /** @class */function () {\n  function ToolBarSelector(chart) {\n    this.selectedSeries = '';\n    this.selectedIndicator = '';\n    this.selectedTrendLine = '';\n    this.indicators = [];\n    this.stockChart = chart;\n    this.selectedSeries = this.stockChart.series[0].type;\n  }\n  ToolBarSelector.prototype.initializePeriodSelector = function () {\n    var periods = this.stockChart.tempPeriods;\n    this.stockChart.periods = periods;\n    this.stockChart.periodSelector.rootControl = this.stockChart;\n    var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n    var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n    var height = this.stockChart.toolbarHeight;\n    this.stockChart.periodSelector.appendSelector({\n      thumbSize: 0,\n      element: htmlElement,\n      width: rect.width,\n      height: height\n    }, rect.x);\n    if (this.stockChart.seriesType.length > 0) {\n      this.initializeSeriesSelector();\n    }\n    this.initializeIndicatorSelector();\n    if (this.stockChart.trendlineType.length > 0) {\n      this.initializeTrendlineSelector();\n    }\n    this.exportButton();\n  };\n  /**\r\n   * This method returns itemModel for dropdown button.\r\n   *\r\n   * @param {ChartSeriesType[] | TechnicalIndicators[] | ExportType[] | TrendlineTypes[]} type - The type of data for the dropdown button (e.g., ChartSeriesType, TechnicalIndicators, ExportType, TrendlineTypes).\r\n   * @returns {ItemModel[]} - An array of item models for the dropdown button.\r\n   */\n  ToolBarSelector.prototype.getDropDownItems = function (type) {\n    var result = [];\n    if (type === this.stockChart.seriesType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n      for (var i = 0; i < this.stockChart.series.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text === 'OHLC' ? 'HiloOpenClose' : text;\n          if (text === this.stockChart.series[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n          }\n        }\n      }\n    } else if (type === this.stockChart.exportType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: type[i].toString()\n        });\n      }\n    } else {\n      for (var i = 0; i < type.length; i++) {\n        if (type[i].toString() !== 'Print') {\n          result.push({\n            text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n          });\n        }\n      }\n    }\n    return result;\n  };\n  /**\r\n   * This method changes the type of series while selectind series in dropdown button.\r\n   *\r\n   * @param {string} seriesType - The type of series selected from the dropdown button.\r\n   * @returns {void}\r\n   */\n  ToolBarSelector.prototype.addedSeries = function (seriesType) {\n    var series = this.stockChart.series;\n    for (var i = 0; i < series.length; i++) {\n      if (series[i].yName === 'volume') {\n        continue;\n      }\n      series[i].type = seriesType.indexOf('Candle') > -1 ? 'Candle' : seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType;\n      series[i].enableSolidCandles = seriesType === 'Candle';\n      for (var index = 0; index < series[i].trendlines.length; index++) {\n        var trendLine = series[i].trendlines[index];\n        trendLine.animation.enable = false;\n        trendLine.enableTooltip = false;\n      }\n    }\n  };\n  ToolBarSelector.prototype.initializeSeriesSelector = function () {\n    var _this = this;\n    if (this.stockChart.seriesType.indexOf('HiloOpenClose') > -1) {\n      this.stockChart.seriesType[this.stockChart.seriesType.indexOf('HiloOpenClose')] = 'OHLC';\n    }\n    if (this.stockChart.seriesType.indexOf('Candle') > -1 && this.stockChart.seriesType.indexOf('Hollow Candle') === -1) {\n      this.stockChart.seriesType[this.stockChart.seriesType.length] = 'Hollow Candle';\n    }\n    var seriesType = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.getDropDownItems(this.stockChart.seriesType),\n      select: function (args) {\n        _this.selectedSeries = args.item.text;\n        var text = _this.tickMark(args);\n        _this.addedSeries(text);\n        _this.stockChart.cartesianChart.initializeChart();\n        if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length && _this.stockChart.legendSettings.visible) {\n          var bounds = _this.stockChart.stockLegendModule.legendBounds;\n          _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n        }\n      }\n    });\n    seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n  };\n  ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n    var _this = this;\n    this.trendlineDropDown = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType),\n      select: function (args) {\n        var type = _this.tickMark(args);\n        _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n        if (_this.trendline !== type) {\n          _this.trendline = type;\n          for (var i = 0; i < _this.stockChart.series.length; i++) {\n            if (_this.stockChart.series[i].yName === 'volume') {\n              continue;\n            }\n            if (_this.stockChart.series[0].trendlines.length === 0) {\n              var trendlines = void 0;\n              if (_this.stockChart.trendlinetriggered) {\n                trendlines = [{\n                  type: type,\n                  width: 1,\n                  enableTooltip: false\n                }];\n                _this.stockChart.trendlinetriggered = false;\n              }\n              _this.stockChart.series[0].trendlines = trendlines;\n            } else {\n              _this.stockChart.series[0].trendlines[0].width = 1;\n              _this.stockChart.series[0].trendlines[0].type = type;\n              _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n            }\n          }\n          _this.stockChart.cartesianChart.initializeChart();\n        } else {\n          args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n          _this.stockChart.series[0].trendlines[0].width = 0;\n          _this.trendline = null;\n          _this.stockChart.cartesianChart.initializeChart();\n        }\n      }\n    });\n    this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n  };\n  ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n    var _this = this;\n    this.indicatorDropDown = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType),\n      select: function (args) {\n        for (var l = 0; l < _this.stockChart.series.length; l++) {\n          if (_this.stockChart.series[l].trendlines.length !== 0) {\n            _this.stockChart.series[l].trendlines[0].animation.enable = false;\n          }\n        }\n        args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) : args.item.text;\n        var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type : _this.selectedIndicator.replace(type, '');\n        if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n          if (_this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n            _this.indicators.push(type);\n            _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n            _this.stockChart.cartesianChart.initializeChart();\n          } else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n              if (_this.stockChart.indicators[z].type === type) {\n                _this.stockChart.indicators.splice(z, 1);\n              }\n            }\n            _this.indicators.splice(_this.indicators.indexOf(type), 1);\n            _this.stockChart.cartesianChart.initializeChart();\n          }\n        } else {\n          _this.createIndicatorAxes(type, args);\n        }\n      }\n    });\n    this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n  };\n  ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n    var currentSeries = this.stockChart.series[0];\n    var indicator = [{\n      type: type,\n      period: 3,\n      yAxisName: yAxisName,\n      dataSource: currentSeries.localData,\n      xName: currentSeries.xName,\n      open: currentSeries.open,\n      close: currentSeries.close,\n      high: currentSeries.high,\n      low: currentSeries.low,\n      volume: currentSeries.volume,\n      fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n      animation: {\n        enable: false\n      },\n      upperLine: {\n        color: '#FFE200',\n        width: 1\n      },\n      periodLine: {\n        width: 2\n      },\n      lowerLine: {\n        color: '#FAA512',\n        width: 1\n      },\n      fastPeriod: 8,\n      slowPeriod: 5,\n      macdType: 'Both',\n      width: 1,\n      macdPositiveColor: '#6EC992',\n      macdNegativeColor: '#FF817F',\n      bandColor: 'rgba(245, 203, 35, 0.12)'\n    }];\n    return indicator;\n  };\n  ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n    if (this.indicators.indexOf(type) === -1) {\n      args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      this.indicators.push(type);\n      var len = this.stockChart.rows.length;\n      this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n      var row = [{\n        height: '' + (100 - len * 15) + 'px'\n      }];\n      if (this.stockChart.rows.length === 1) {\n        this.stockChart.isSingleAxis = true;\n      }\n      this.stockChart.rows = this.stockChart.rows.concat(row);\n      if (!this.stockChart.isSingleAxis) {\n        this.stockChart.axes[0].rowIndex += 1;\n      } else {\n        for (var i = 0; i < this.stockChart.axes.length; i++) {\n          this.stockChart.axes[i].rowIndex += 1;\n        }\n      }\n      var axis = [{\n        plotOffset: 10,\n        opposedPosition: true,\n        rowIndex: !this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0,\n        desiredIntervals: 1,\n        labelFormat: 'n2',\n        majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n        lineStyle: this.stockChart.primaryYAxis.lineStyle,\n        labelPosition: this.stockChart.primaryYAxis.labelPosition,\n        majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n        rangePadding: 'None',\n        name: type.toString()\n      }];\n      this.stockChart.axes = this.stockChart.axes.concat(axis);\n      this.stockChart.primaryYAxis.rowIndex = !this.stockChart.isSingleAxis ? 0 : len + 1;\n      var indicator = this.getIndicator(type, type.toString());\n      this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n      this.stockChart.cartesianChart.initializeChart();\n    } else {\n      args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        if (this.stockChart.indicators[i].type === type) {\n          this.stockChart.indicators.splice(i, 1);\n        }\n      }\n      this.indicators.splice(this.indicators.indexOf(type), 1);\n      var removedIndex = 0;\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].name === type) {\n          removedIndex = this.stockChart.axes[z].rowIndex;\n          this.stockChart.rows.splice(z, 1);\n          this.stockChart.axes.splice(z, 1);\n        }\n      }\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n          this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n        }\n      }\n      this.stockChart.cartesianChart.initializeChart();\n    }\n  };\n  ToolBarSelector.prototype.tickMark = function (args) {\n    var text;\n    var items = args.item['parentObj'].items;\n    for (var i = 0; i < items.length; i++) {\n      items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ? items[i].text.substr(items[i].text.indexOf(';') + 1) : items[i].text;\n      if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n        items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n      }\n    }\n    if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n      text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n    } else {\n      text = args.item.text.replace('&#10004&nbsp;', '');\n    }\n    return text;\n  };\n  ToolBarSelector.prototype.exportButton = function () {\n    var _this = this;\n    var exportChart = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.getDropDownItems(this.stockChart.exportType),\n      select: function (args) {\n        var type = args.item.text;\n        if (_this.stockChart.chart.exportModule) {\n          var stockChart = _this.stockChart;\n          var stockID = stockChart.element.id + '_stockChart_';\n          var svgHeight = stockChart.svgObject.getBoundingClientRect();\n          _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings(type === 'Print'));\n          var additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n          var rect = new RectOption('additionalRect', 'transparent', {\n            width: 0,\n            color: 'transparent'\n          }, 1, new Rect(0, 0, _this.stockChart.availableSize.width, additionalRect.height));\n          stockChart.svgObject.firstElementChild.insertAdjacentElement('afterbegin', _this.stockChart.renderer.drawRectangle(rect));\n          _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n          getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          }\n          if (type === 'Print') {\n            _this.stockChart.chart.print(_this.stockChart.svgObject.id);\n          } else {\n            stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n          }\n          remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n          getElement(stockID + 'chart').style.transform = '';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + stockChart.cartesianChart.cartesianChartSize.height + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n          }\n          _this.stockChart.svgObject.setAttribute('height', svgHeight.height.toString());\n        }\n      }\n    });\n    exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n  };\n  ToolBarSelector.prototype.calculateAutoPeriods = function () {\n    var defaultPeriods = [];\n    var min = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMin] : this.stockChart.seriesXMin;\n    var max = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMax] : this.stockChart.seriesXMax;\n    defaultPeriods = this.findRange(min, max);\n    defaultPeriods.push({\n      text: 'YTD',\n      selected: true\n    }, {\n      text: 'All'\n    });\n    return defaultPeriods;\n  };\n  ToolBarSelector.prototype.findRange = function (min, max) {\n    var defaultPeriods = [];\n    if ((max - min) / 3.154e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      }, {\n        text: '1Y',\n        interval: 1,\n        intervalType: 'Years'\n      });\n    } else if ((max - min) / 1.577e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 2.628e+9 >= 1) {\n      defaultPeriods.push({\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      }, {\n        text: '3W',\n        interval: 3,\n        intervalType: 'Weeks'\n      }, {\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 8.64e+7 >= 1) {\n      defaultPeriods.push({\n        text: '1H',\n        interval: 1,\n        intervalType: 'Hours'\n      }, {\n        text: '12H',\n        interval: 12,\n        intervalType: 'Hours'\n      }, {\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      });\n    }\n    return defaultPeriods;\n  };\n  /**\r\n   * Text elements added to while export the chart\r\n   * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\r\n   *\r\n   * @param {boolean} isPrint - Specifies whether the export is for printing.\r\n   * @returns {Element} - The element containing the exported chart details.\r\n   */\n  ToolBarSelector.prototype.addExportSettings = function (isPrint) {\n    var exportElement = this.stockChart.renderer.createGroup({\n      id: this.stockChart.element.id + '_additionalExport',\n      width: this.stockChart.availableSize.width,\n      fill: this.stockChart.background ? this.stockChart.background : 'transparent'\n    });\n    var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle, this.stockChart.themeStyle.chartTitleFont).height;\n    var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n    textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color || this.stockChart.themeStyle.chartTitleFont.color, exportElement, null, null, null, null, null, null, null, null, null, null, this.stockChart.themeStyle.chartTitleFont);\n    if (isPrint) {\n      return exportElement;\n    }\n    var style = {\n      size: '16px',\n      fontWeight: '600',\n      color: this.stockChart.themeStyle.chartTitleFont.color,\n      fontStyle: 'Normal',\n      fontFamily: this.stockChart.themeStyle.chartTitleFont.fontFamily\n    };\n    var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n    var y = titleHeight;\n    this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n    x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n    if (this.selectedIndicator !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n      x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n    }\n    if (this.selectedTrendLine !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n    }\n    return exportElement;\n  };\n  /** @private */\n  ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n    if (isMinus === void 0) {\n      isMinus = false;\n    }\n    if (forceAnimate === void 0) {\n      forceAnimate = false;\n    }\n    var renderer = new SvgRenderer('');\n    var renderOptions = {};\n    var tspanElement;\n    renderOptions = {\n      'id': options.id,\n      'font-style': font.fontStyle,\n      'font-family': font.fontFamily,\n      'font-weight': font.fontWeight,\n      'text-anchor': options.anchor,\n      'x': options.x,\n      'y': options.y,\n      'fill': color,\n      'font-size': font.size,\n      'transform': options.transform,\n      'opacity': font.opacity,\n      'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var htmlObject = renderer.createText(renderOptions, text);\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n      for (var i = 1, len = options.text.length; i < len; i++) {\n        options.text[i] = ' ' + options.text[i];\n        tspanElement = renderer.createTSpan({\n          'x': options.x + measureText(text, font).width + 5,\n          'id': options.id,\n          'y': options.y,\n          opacity: 0.5\n        }, options.text[i]);\n        htmlObject.appendChild(tspanElement);\n      }\n    }\n    appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n    return htmlObject;\n  };\n  return ToolBarSelector;\n}();\nexport { ToolBarSelector };","map":{"version":3,"names":["titlePositionX","textElement","appendChildElement","getElement","RectOption","DropDownButton","Rect","TextOption","measureText","SvgRenderer","remove","ToolBarSelector","chart","selectedSeries","selectedIndicator","selectedTrendLine","indicators","stockChart","series","type","prototype","initializePeriodSelector","periods","tempPeriods","periodSelector","rootControl","rect","chartAxisLayoutPanel","seriesClipRect","htmlElement","element","id","height","toolbarHeight","appendSelector","thumbSize","width","x","seriesType","length","initializeSeriesSelector","initializeIndicatorSelector","trendlineType","initializeTrendlineSelector","exportButton","getDropDownItems","result","i","push","text","toString","j","replace","exportType","addedSeries","yName","indexOf","enableSolidCandles","index","trendlines","trendLine","animation","enable","enableTooltip","_this","enableHtmlSanitizer","items","select","args","item","tickMark","cartesianChart","initializeChart","stockLegendModule","legendCollections","legendSettings","visible","bounds","legendBounds","renderLegend","appendTo","trendlineDropDown","resizeTo","trendline","trendlinetriggered","indicatorDropDown","indicatorType","l","substr","split","toLocaleLowerCase","toUpperCase","indicator","getIndicator","yAxisName","concat","z","splice","createIndicatorAxes","currentSeries","period","dataSource","localData","xName","open","close","high","low","volume","fill","upperLine","color","periodLine","lowerLine","fastPeriod","slowPeriod","macdType","macdPositiveColor","macdNegativeColor","bandColor","len","rows","row","isSingleAxis","axes","rowIndex","axis","plotOffset","opposedPosition","desiredIntervals","labelFormat","majorGridLines","primaryYAxis","lineStyle","labelPosition","majorTickLines","rangePadding","name","removedIndex","exportChart","exportModule","stockID","svgHeight","svgObject","getBoundingClientRect","insertAdjacentElement","addExportSettings","additionalRect","firstElementChild","availableSize","renderer","drawRectangle","setAttribute","style","transform","enableSelector","cartesianChartSize","print","export","clientHeight","calculateAutoPeriods","defaultPeriods","min","isDateTimeCategory","sortedData","seriesXMin","max","seriesXMax","findRange","selected","interval","intervalType","isPrint","exportElement","createGroup","background","titleHeight","title","titleStyle","themeStyle","chartTitleFont","options","size","fontWeight","fontStyle","fontFamily","y","textElementSpan","font","parent","isMinus","redraw","isAnimate","forceAnimate","animateDuration","renderOptions","tspanElement","anchor","opacity","baseLine","htmlObject","createText","createTSpan","appendChild"],"sources":["C:/Users/wiliam/Desktop/indiec-nuevo/fronted-vue/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/toolbar-selector.js"],"sourcesContent":["import { titlePositionX, textElement, appendChildElement, getElement, RectOption } from '../../common/utils/helper';\r\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\r\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\r\nimport { remove } from '@syncfusion/ej2-base';\r\n/**\r\n * Period selector for range navigator\r\n */\r\n/** @private */\r\nvar ToolBarSelector = /** @class */ (function () {\r\n    function ToolBarSelector(chart) {\r\n        this.selectedSeries = '';\r\n        this.selectedIndicator = '';\r\n        this.selectedTrendLine = '';\r\n        this.indicators = [];\r\n        this.stockChart = chart;\r\n        this.selectedSeries = this.stockChart.series[0].type;\r\n    }\r\n    ToolBarSelector.prototype.initializePeriodSelector = function () {\r\n        var periods = this.stockChart.tempPeriods;\r\n        this.stockChart.periods = periods;\r\n        this.stockChart.periodSelector.rootControl = this.stockChart;\r\n        var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\r\n        var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\r\n        var height = this.stockChart.toolbarHeight;\r\n        this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: htmlElement, width: rect.width, height: height }, rect.x);\r\n        if (this.stockChart.seriesType.length > 0) {\r\n            this.initializeSeriesSelector();\r\n        }\r\n        this.initializeIndicatorSelector();\r\n        if (this.stockChart.trendlineType.length > 0) {\r\n            this.initializeTrendlineSelector();\r\n        }\r\n        this.exportButton();\r\n    };\r\n    /**\r\n     * This method returns itemModel for dropdown button.\r\n     *\r\n     * @param {ChartSeriesType[] | TechnicalIndicators[] | ExportType[] | TrendlineTypes[]} type - The type of data for the dropdown button (e.g., ChartSeriesType, TechnicalIndicators, ExportType, TrendlineTypes).\r\n     * @returns {ItemModel[]} - An array of item models for the dropdown button.\r\n     */\r\n    ToolBarSelector.prototype.getDropDownItems = function (type) {\r\n        var result = [];\r\n        if (type === this.stockChart.seriesType) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\r\n            }\r\n            for (var i = 0; i < this.stockChart.series.length; i++) {\r\n                for (var j = 0; j < result.length; j++) {\r\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\r\n                    text = (text === 'OHLC') ? 'HiloOpenClose' : text;\r\n                    if (text === this.stockChart.series[i].type) {\r\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (type === this.stockChart.exportType) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                result.push({ text: type[i].toString() });\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < type.length; i++) {\r\n                if (type[i].toString() !== 'Print') {\r\n                    result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * This method changes the type of series while selectind series in dropdown button.\r\n     *\r\n     * @param {string} seriesType - The type of series selected from the dropdown button.\r\n     * @returns {void}\r\n     */\r\n    ToolBarSelector.prototype.addedSeries = function (seriesType) {\r\n        var series = this.stockChart.series;\r\n        for (var i = 0; i < series.length; i++) {\r\n            if (series[i].yName === 'volume') {\r\n                continue;\r\n            }\r\n            series[i].type = (seriesType.indexOf('Candle') > -1 ? 'Candle' :\r\n                (seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType));\r\n            series[i].enableSolidCandles = seriesType === 'Candle';\r\n            for (var index = 0; index < series[i].trendlines.length; index++) {\r\n                var trendLine = series[i].trendlines[index];\r\n                trendLine.animation.enable = false;\r\n                trendLine.enableTooltip = false;\r\n            }\r\n        }\r\n    };\r\n    ToolBarSelector.prototype.initializeSeriesSelector = function () {\r\n        var _this = this;\r\n        if (this.stockChart.seriesType.indexOf('HiloOpenClose') > -1) {\r\n            this.stockChart.seriesType[this.stockChart.seriesType.indexOf('HiloOpenClose')] = 'OHLC';\r\n        }\r\n        if (this.stockChart.seriesType.indexOf('Candle') > -1 && this.stockChart.seriesType.indexOf('Hollow Candle') === -1) {\r\n            this.stockChart.seriesType[this.stockChart.seriesType.length] = 'Hollow Candle';\r\n        }\r\n        var seriesType = new DropDownButton({\r\n            enableHtmlSanitizer: false,\r\n            items: this.getDropDownItems(this.stockChart.seriesType),\r\n            select: function (args) {\r\n                _this.selectedSeries = args.item.text;\r\n                var text = _this.tickMark(args);\r\n                _this.addedSeries(text);\r\n                _this.stockChart.cartesianChart.initializeChart();\r\n                if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length\r\n                    && _this.stockChart.legendSettings.visible) {\r\n                    var bounds = _this.stockChart.stockLegendModule.legendBounds;\r\n                    _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\r\n                }\r\n            }\r\n        });\r\n        seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\r\n    };\r\n    ToolBarSelector.prototype.initializeTrendlineSelector = function () {\r\n        var _this = this;\r\n        this.trendlineDropDown = new DropDownButton({\r\n            enableHtmlSanitizer: false,\r\n            items: this.stockChart.resizeTo ? this.trendlineDropDown.items :\r\n                this.getDropDownItems(this.stockChart.trendlineType),\r\n            select: function (args) {\r\n                var type = _this.tickMark(args);\r\n                _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\r\n                if (_this.trendline !== type) {\r\n                    _this.trendline = type;\r\n                    for (var i = 0; i < _this.stockChart.series.length; i++) {\r\n                        if (_this.stockChart.series[i].yName === 'volume') {\r\n                            continue;\r\n                        }\r\n                        if (_this.stockChart.series[0].trendlines.length === 0) {\r\n                            var trendlines = void 0;\r\n                            if (_this.stockChart.trendlinetriggered) {\r\n                                trendlines = [{ type: type, width: 1, enableTooltip: false }];\r\n                                _this.stockChart.trendlinetriggered = false;\r\n                            }\r\n                            _this.stockChart.series[0].trendlines = trendlines;\r\n                        }\r\n                        else {\r\n                            _this.stockChart.series[0].trendlines[0].width = 1;\r\n                            _this.stockChart.series[0].trendlines[0].type = type;\r\n                            _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\r\n                        }\r\n                    }\r\n                    _this.stockChart.cartesianChart.initializeChart();\r\n                }\r\n                else {\r\n                    args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\r\n                    _this.stockChart.series[0].trendlines[0].width = 0;\r\n                    _this.trendline = null;\r\n                    _this.stockChart.cartesianChart.initializeChart();\r\n                }\r\n            }\r\n        });\r\n        this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\r\n    };\r\n    ToolBarSelector.prototype.initializeIndicatorSelector = function () {\r\n        var _this = this;\r\n        this.indicatorDropDown = new DropDownButton({\r\n            enableHtmlSanitizer: false,\r\n            items: this.stockChart.resizeTo ? this.indicatorDropDown.items :\r\n                this.getDropDownItems(this.stockChart.indicatorType),\r\n            select: function (args) {\r\n                for (var l = 0; l < _this.stockChart.series.length; l++) {\r\n                    if (_this.stockChart.series[l].trendlines.length !== 0) {\r\n                        _this.stockChart.series[l].trendlines[0].animation.enable = false;\r\n                    }\r\n                }\r\n                args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) :\r\n                    args.item.text;\r\n                var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\r\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\r\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\r\n                var type = text;\r\n                _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type :\r\n                    _this.selectedIndicator.replace(type, '');\r\n                if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\r\n                    if (_this.indicators.indexOf(type) === -1) {\r\n                        args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\r\n                        var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\r\n                        _this.indicators.push(type);\r\n                        _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\r\n                        _this.stockChart.cartesianChart.initializeChart();\r\n                    }\r\n                    else {\r\n                        args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\r\n                        for (var z = 0; z < _this.stockChart.indicators.length; z++) {\r\n                            if (_this.stockChart.indicators[z].type === type) {\r\n                                _this.stockChart.indicators.splice(z, 1);\r\n                            }\r\n                        }\r\n                        _this.indicators.splice(_this.indicators.indexOf(type), 1);\r\n                        _this.stockChart.cartesianChart.initializeChart();\r\n                    }\r\n                }\r\n                else {\r\n                    _this.createIndicatorAxes(type, args);\r\n                }\r\n            }\r\n        });\r\n        this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\r\n    };\r\n    ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\r\n        var currentSeries = this.stockChart.series[0];\r\n        var indicator = [{\r\n                type: type, period: 3, yAxisName: yAxisName,\r\n                dataSource: currentSeries.localData,\r\n                xName: currentSeries.xName,\r\n                open: currentSeries.open,\r\n                close: currentSeries.close,\r\n                high: currentSeries.high,\r\n                low: currentSeries.low,\r\n                volume: currentSeries.volume,\r\n                fill: type === 'Sma' ? '#32CD32' : '#6063ff',\r\n                animation: { enable: false }, upperLine: { color: '#FFE200', width: 1 },\r\n                periodLine: { width: 2 }, lowerLine: { color: '#FAA512', width: 1 },\r\n                fastPeriod: 8, slowPeriod: 5, macdType: 'Both', width: 1,\r\n                macdPositiveColor: '#6EC992', macdNegativeColor: '#FF817F',\r\n                bandColor: 'rgba(245, 203, 35, 0.12)'\r\n            }];\r\n        return indicator;\r\n    };\r\n    ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\r\n        if (this.indicators.indexOf(type) === -1) {\r\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\r\n            this.indicators.push(type);\r\n            var len = this.stockChart.rows.length;\r\n            this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\r\n            var row = [{ height: '' + (100 - len * 15) + 'px' }];\r\n            if (this.stockChart.rows.length === 1) {\r\n                this.stockChart.isSingleAxis = true;\r\n            }\r\n            this.stockChart.rows = this.stockChart.rows.concat(row);\r\n            if (!this.stockChart.isSingleAxis) {\r\n                this.stockChart.axes[0].rowIndex += 1;\r\n            }\r\n            else {\r\n                for (var i = 0; i < this.stockChart.axes.length; i++) {\r\n                    this.stockChart.axes[i].rowIndex += 1;\r\n                }\r\n            }\r\n            var axis = [{\r\n                    plotOffset: 10, opposedPosition: true,\r\n                    rowIndex: (!this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0),\r\n                    desiredIntervals: 1,\r\n                    labelFormat: 'n2',\r\n                    majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\r\n                    lineStyle: this.stockChart.primaryYAxis.lineStyle,\r\n                    labelPosition: this.stockChart.primaryYAxis.labelPosition,\r\n                    majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\r\n                    rangePadding: 'None', name: type.toString()\r\n                }];\r\n            this.stockChart.axes = this.stockChart.axes.concat(axis);\r\n            this.stockChart.primaryYAxis.rowIndex = (!this.stockChart.isSingleAxis ? 0 : len + 1);\r\n            var indicator = this.getIndicator(type, type.toString());\r\n            this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\r\n            this.stockChart.cartesianChart.initializeChart();\r\n        }\r\n        else {\r\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\r\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\r\n                if (this.stockChart.indicators[i].type === type) {\r\n                    this.stockChart.indicators.splice(i, 1);\r\n                }\r\n            }\r\n            this.indicators.splice(this.indicators.indexOf(type), 1);\r\n            var removedIndex = 0;\r\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\r\n                if (this.stockChart.axes[z].name === type) {\r\n                    removedIndex = this.stockChart.axes[z].rowIndex;\r\n                    this.stockChart.rows.splice(z, 1);\r\n                    this.stockChart.axes.splice(z, 1);\r\n                }\r\n            }\r\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\r\n                if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\r\n                    this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\r\n                }\r\n            }\r\n            this.stockChart.cartesianChart.initializeChart();\r\n        }\r\n    };\r\n    ToolBarSelector.prototype.tickMark = function (args) {\r\n        var text;\r\n        var items = args.item['parentObj'].items;\r\n        for (var i = 0; i < items.length; i++) {\r\n            items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ?\r\n                items[i].text.substr(items[i].text.indexOf(';') + 1) :\r\n                items[i].text;\r\n            if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\r\n                items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\r\n            }\r\n        }\r\n        if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\r\n            text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\r\n            args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\r\n        }\r\n        else {\r\n            text = args.item.text.replace('&#10004&nbsp;', '');\r\n        }\r\n        return text;\r\n    };\r\n    ToolBarSelector.prototype.exportButton = function () {\r\n        var _this = this;\r\n        var exportChart = new DropDownButton({\r\n            enableHtmlSanitizer: false,\r\n            items: this.getDropDownItems(this.stockChart.exportType),\r\n            select: function (args) {\r\n                var type = args.item.text;\r\n                if (_this.stockChart.chart.exportModule) {\r\n                    var stockChart = _this.stockChart;\r\n                    var stockID = stockChart.element.id + '_stockChart_';\r\n                    var svgHeight = stockChart.svgObject.getBoundingClientRect();\r\n                    _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings(type === 'Print'));\r\n                    var additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\r\n                    var rect = new RectOption('additionalRect', 'transparent', { width: 0, color: 'transparent' }, 1, new Rect(0, 0, _this.stockChart.availableSize.width, additionalRect.height));\r\n                    stockChart.svgObject.firstElementChild.insertAdjacentElement('afterbegin', _this.stockChart.renderer.drawRectangle(rect));\r\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\r\n                    getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\r\n                    if (stockChart.enableSelector) {\r\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\r\n                    }\r\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\r\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\r\n                    }\r\n                    if (type === 'Print') {\r\n                        _this.stockChart.chart.print(_this.stockChart.svgObject.id);\r\n                    }\r\n                    else {\r\n                        stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\r\n                    }\r\n                    remove(getElement(_this.stockChart.element.id + '_additionalExport'));\r\n                    getElement(stockID + 'chart').style.transform = '';\r\n                    if (stockChart.enableSelector) {\r\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height) + ')');\r\n                    }\r\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\r\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\r\n                    }\r\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height).toString());\r\n                }\r\n            }\r\n        });\r\n        exportChart.appendTo('#' + this.stockChart.element.id + '_export');\r\n    };\r\n    ToolBarSelector.prototype.calculateAutoPeriods = function () {\r\n        var defaultPeriods = [];\r\n        var min = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMin] :\r\n            this.stockChart.seriesXMin;\r\n        var max = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMax] :\r\n            this.stockChart.seriesXMax;\r\n        defaultPeriods = this.findRange(min, max);\r\n        defaultPeriods.push({ text: 'YTD', selected: true }, { text: 'All' });\r\n        return defaultPeriods;\r\n    };\r\n    ToolBarSelector.prototype.findRange = function (min, max) {\r\n        var defaultPeriods = [];\r\n        if (((max - min) / 3.154e+10) >= 1) {\r\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' }, { text: '1Y', interval: 1, intervalType: 'Years' });\r\n        }\r\n        else if ((max - min) / 1.577e+10 >= 1) {\r\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' });\r\n        }\r\n        else if ((max - min) / 2.628e+9 >= 1) {\r\n            defaultPeriods.push({ text: '1D', interval: 1, intervalType: 'Days' }, { text: '3W', interval: 3, intervalType: 'Weeks' }, { text: '1M', interval: 1, intervalType: 'Months' });\r\n        }\r\n        else if ((max - min) / 8.64e+7 >= 1) {\r\n            defaultPeriods.push({ text: '1H', interval: 1, intervalType: 'Hours' }, { text: '12H', interval: 12, intervalType: 'Hours' }, { text: '1D', interval: 1, intervalType: 'Days' });\r\n        }\r\n        return defaultPeriods;\r\n    };\r\n    /**\r\n     * Text elements added to while export the chart\r\n     * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\r\n     *\r\n     * @param {boolean} isPrint - Specifies whether the export is for printing.\r\n     * @returns {Element} - The element containing the exported chart details.\r\n     */\r\n    ToolBarSelector.prototype.addExportSettings = function (isPrint) {\r\n        var exportElement = this.stockChart.renderer.createGroup({\r\n            id: this.stockChart.element.id + '_additionalExport',\r\n            width: this.stockChart.availableSize.width,\r\n            fill: this.stockChart.background ? this.stockChart.background : 'transparent'\r\n        });\r\n        var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle, this.stockChart.themeStyle.chartTitleFont).height;\r\n        var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\r\n        textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color || this.stockChart.themeStyle.chartTitleFont.color, exportElement, null, null, null, null, null, null, null, null, null, null, this.stockChart.themeStyle.chartTitleFont);\r\n        if (isPrint) {\r\n            return exportElement;\r\n        }\r\n        var style = { size: '16px', fontWeight: '600', color: this.stockChart.themeStyle.chartTitleFont.color, fontStyle: 'Normal', fontFamily: this.stockChart.themeStyle.chartTitleFont.fontFamily };\r\n        var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\r\n        var y = titleHeight;\r\n        this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\r\n        x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\r\n        if (this.selectedIndicator !== '') {\r\n            this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\r\n            x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\r\n        }\r\n        if (this.selectedTrendLine !== '') {\r\n            this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\r\n        }\r\n        return exportElement;\r\n    };\r\n    /** @private */\r\n    ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\r\n        if (isMinus === void 0) { isMinus = false; }\r\n        if (forceAnimate === void 0) { forceAnimate = false; }\r\n        var renderer = new SvgRenderer('');\r\n        var renderOptions = {};\r\n        var tspanElement;\r\n        renderOptions = {\r\n            'id': options.id,\r\n            'font-style': font.fontStyle,\r\n            'font-family': font.fontFamily,\r\n            'font-weight': font.fontWeight,\r\n            'text-anchor': options.anchor,\r\n            'x': options.x,\r\n            'y': options.y,\r\n            'fill': color,\r\n            'font-size': font.size,\r\n            'transform': options.transform,\r\n            'opacity': font.opacity,\r\n            'dominant-baseline': options.baseLine\r\n        };\r\n        var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\r\n        var htmlObject = renderer.createText(renderOptions, text);\r\n        if (typeof options.text !== 'string' && options.text.length > 1) {\r\n            for (var i = 1, len = options.text.length; i < len; i++) {\r\n                options.text[i] = ' ' + options.text[i];\r\n                tspanElement = renderer.createTSpan({\r\n                    'x': options.x + measureText(text, font).width + 5, 'id': options.id,\r\n                    'y': (options.y), opacity: 0.5\r\n                }, options.text[i]);\r\n                htmlObject.appendChild(tspanElement);\r\n            }\r\n        }\r\n        appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\r\n        return htmlObject;\r\n    };\r\n    return ToolBarSelector;\r\n}());\r\nexport { ToolBarSelector };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}