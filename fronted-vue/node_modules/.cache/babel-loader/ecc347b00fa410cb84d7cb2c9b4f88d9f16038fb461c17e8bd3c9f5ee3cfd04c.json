{"ast":null,"code":"import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\nimport { textElement, getValueXByPoint, stopTimer, findCrosshairDirection, getValueYByPoint, ChartLocation, withInBounds, removeElement } from '../../common/utils/helper';\nimport { PathOption, Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\n/**\r\n * `Crosshair` module is used to render the crosshair for chart.\r\n */\nvar Crosshair = /** @class */function () {\n  /**\r\n   * Constructor for crosshair module.\r\n   *\r\n   * @private\r\n   */\n  function Crosshair(chart) {\n    this.arrowLocation = new ChartLocation(0, 0);\n    this.rx = 2;\n    this.ry = 2;\n    this.chart = chart;\n    this.elementID = this.chart.element.id;\n    this.svgRenderer = new SvgRenderer(this.chart.element.id);\n    this.addEventListener();\n  }\n  /**\r\n   * Adds event listeners to the chart elements.\r\n   *\r\n   * @private\r\n   * @returns {void}\r\n   */\n  Crosshair.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n    this.chart.on('tapHold', this.longPress, this);\n  };\n  Crosshair.prototype.mouseUpHandler = function () {\n    if (this.chart.startMove) {\n      this.removeCrosshair(2000);\n    }\n  };\n  Crosshair.prototype.mouseLeaveHandler = function () {\n    this.removeCrosshair(1000);\n  };\n  Crosshair.prototype.mouseMoveHandler = function (event) {\n    var chart = this.chart;\n    if (chart.stockChart && chart.stockChart.onPanning) {\n      if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\n      } else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\n        chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\n      }\n    }\n    if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\n      event.preventDefault();\n    }\n    // Tooltip for chart series.\n    if (!chart.disableTrackTooltip) {\n      if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        if (chart.startMove || !chart.isTouch) {\n          this.crosshair();\n        }\n      } else {\n        this.removeCrosshair(1000);\n      }\n    }\n  };\n  /**\r\n   * Handles the long press on chart.\r\n   *\r\n   * @returns {boolean} false\r\n   * @private\r\n   */\n  Crosshair.prototype.longPress = function () {\n    var chart = this.chart;\n    if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n      this.crosshair();\n    }\n    return false;\n  };\n  /**\r\n   * Renders the crosshair.\r\n   *\r\n   * @returns {void}\r\n   */\n  Crosshair.prototype.crosshair = function () {\n    var chart = this.chart;\n    var horizontalCross = '';\n    var verticalCross = '';\n    var options;\n    var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\n    var crosshair = chart.crosshair;\n    var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\n    var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n    var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairsvg;\n    var cross = document.getElementById(this.elementID + '_Crosshair');\n    if (chart.enableCanvas) {\n      if (!cross) {\n        cross = createElement('div', {\n          id: this.elementID + '_Crosshair',\n          styles: 'position: absolute; pointer-events: none'\n        });\n        crossGroup.appendChild(cross);\n      }\n    }\n    this.stopAnimation();\n    if (chart.isCrosshair && chart.tooltip.enable && chart.tooltipModule && !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect)) {\n      return null;\n    }\n    this.valueX = chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueX ? chart.tooltipModule.valueX : chart.mouseX;\n    this.valueY = chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueY ? chart.tooltipModule.valueY : chart.mouseY;\n    if (!chart.enableCanvas) {\n      crossGroup.setAttribute('opacity', '1');\n    }\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n      horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY + ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n    }\n    if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n      verticalCross += 'M ' + this.valueX + ' ' + chartRect.y + ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n    }\n    if (chart.enableCanvas) {\n      if (!axisTooltipGroup) {\n        axisTooltipGroup = this.svgRenderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n      }\n      var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\n      crosshairsvg = this.svgRenderer.createSvg({\n        id: elementID,\n        width: chart.availableSize.width,\n        height: chart.availableSize.height\n      });\n      if (chart.tooltip.enable) {\n        tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\n        tooltipdiv.appendChild(crosshairsvg);\n        crossGroup.appendChild(tooltipdiv);\n      }\n      options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n      this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\n      /**\r\n       * due to not working for vertical line side I added new option\r\n       * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\r\n       */\n      options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n      this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\n      this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\n      crosshairsvg.appendChild(axisTooltipGroup);\n      if (!chart.tooltip.enable) {\n        cross.appendChild(crosshairsvg);\n      }\n    } else {\n      if (crossGroup.childNodes.length === 0) {\n        axisTooltipGroup = chart.renderer.createGroup({\n          'id': this.elementID + '_crosshair_axis'\n        });\n        options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\n        this.renderCrosshairLine(options, crossGroup);\n        crossGroup.appendChild(axisTooltipGroup);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      } else {\n        document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n        document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n        this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n      }\n    }\n  };\n  Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n    var htmlObject = this.chart.renderer.drawPath(options);\n    crossGroup.appendChild(htmlObject);\n  };\n  Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\n    if (!document.getElementById(options.id) && direction) {\n      var line = createElement('div', {\n        id: options.id\n      });\n      crossGroup.appendChild(line);\n    }\n    if (document.getElementById(options.id)) {\n      var style = 'top:' + top.toString() + 'px;' + 'left:' + left.toString() + 'px;' + 'width:' + width + 'px;' + 'height:' + height + 'px;' + 'fill:' + options.stroke + ';' + 'border: 0.5px solid ' + options.stroke + ';' + 'opacity: ' + options.opacity + ' ; ' + 'position: absolute';\n      var crosshairline = document.getElementById(options.id);\n      var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\n      crosshairline.style.cssText = style;\n      crossGroup.style.opacity = '1';\n      if (crosshairtooltip) {\n        crosshairtooltip.style.opacity = '1';\n      }\n    }\n  };\n  Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n    var axis;\n    var text;\n    var rect;\n    var pathElement;\n    var textElem;\n    var options;\n    var padding = 5;\n    var direction;\n    var axisRect;\n    for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n      axis = chart.axisCollections[k];\n      axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\n      if (axis.crosshairTooltip.enable) {\n        if (axisRect && (this.valueX <= axisRect.x + axisRect.width && axisRect.x <= this.valueX || this.valueY <= axisRect.y + axisRect.height && axisRect.y <= this.valueY)) {\n          pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n          textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n          text = this.getAxisText(axis);\n          if (text && text.indexOf('<br') > -1) {\n            text = this.getAxisText(axis).split(/<br.*?>/g);\n          }\n          if (!text) {\n            continue;\n          }\n          rect = this.tooltipLocation(text, axis, chartRect, axisRect);\n          if (rect.y + rect.height / 2 > chart.availableSize.height || rect.y < 0) {\n            continue;\n          }\n          if (pathElement === null) {\n            if (chart.enableCanvas) {\n              pathElement = this.svgRenderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              });\n            } else {\n              pathElement = chart.renderer.drawPath({\n                'id': this.elementID + '_axis_tooltip_' + k,\n                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\n              }, null);\n            }\n            axisGroup.appendChild(pathElement);\n            options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, chart.stockChart && chart.enableRtl ? 'end' : 'start', text);\n            var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\n            textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabelFont.color, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas, null, this.chart.themeStyle.crosshairLabelFont);\n          }\n          direction = findCrosshairDirection(this.rx, this.ry, rect, this.arrowLocation, 9, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n          pathElement.setAttribute('d', direction);\n          if (typeof text !== 'string' && text.length > 1) {\n            for (var i = 0; i < text.length; i++) {\n              textElem.childNodes[i].textContent = text[i];\n            }\n          } else {\n            textElem.textContent = text;\n          }\n          textElem.setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0)).toString());\n          textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n          var shadowId = this.chart.element.id + '_shadow';\n          if (typeof text !== 'string' && text.length > 1) {\n            var height = 0;\n            textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / (4 * text.length)).toString());\n            for (var i = 0; i < textElem.children.length; i++) {\n              height += this.elementSize.height / text.length;\n              textElem.children[i].setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0) + this.elementSize.width / 2).toString());\n              textElem.children[i].setAttribute('y', (parseInt(textElem.getAttribute('y'), 10) + height).toString());\n              textElem.children[i].setAttribute('style', 'text-anchor: middle');\n            }\n          }\n          if (this.chart.theme === 'Fluent' || this.chart.theme === 'FluentDark' || this.chart.theme === 'Fabric' || this.chart.theme === 'FabricDark') {\n            var defElement = this.chart.renderer.createDefs();\n            var bordercolor = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? '#D2D0CE' : null;\n            var borderwidth = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? 1 : null;\n            defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n            axisGroup.appendChild(defElement);\n            pathElement.setAttribute('stroke', bordercolor);\n            pathElement.setAttribute('stroke-width', ' ' + borderwidth);\n          } else if (this.chart.theme.indexOf('Fluent2') > -1) {\n            pathElement.setAttribute('box-shadow', '0px 1.6px 3.6px 0px #00000021, 0px 0.3px 0.9px 0px #0000001A');\n            pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\n            var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\n            shadow += '<feOffset dx=\"-1\" dy=\"3.6\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.2\"/>';\n            shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n            var defElement = this.chart.renderer.createDefs();\n            defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\n            pathElement.appendChild(defElement);\n            defElement.innerHTML = shadow;\n          }\n        } else {\n          removeElement(this.elementID + '_axis_tooltip_' + k);\n          removeElement(this.elementID + '_axis_tooltip_text_' + k);\n        }\n      }\n    }\n  };\n  Crosshair.prototype.getAxisText = function (axis) {\n    var value;\n    this.isBottom = false;\n    this.isTop = false;\n    this.isLeft = false;\n    this.isRight = false;\n    var labelValue = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' ? 0.5 : 0;\n    var isOpposed = axis.isAxisOpposedPosition;\n    if (axis.orientation === 'Horizontal') {\n      value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n      this.isBottom = !isOpposed;\n      this.isTop = isOpposed;\n    } else {\n      value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n      this.isRight = isOpposed;\n      this.isLeft = !isOpposed;\n    }\n    if (axis.valueType === 'DateTime') {\n      return axis.format(new Date(value));\n    } else if (axis.valueType === 'Category') {\n      return axis.labels[Math.floor(value)];\n    } else if (axis.valueType === 'DateTimeCategory') {\n      return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.round(value)], axis.format);\n    } else if (axis.valueType === 'Logarithmic') {\n      return value = axis.format(Math.pow(axis.logBase, value));\n    } else {\n      var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n    }\n  };\n  Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\n    var padding = 5;\n    var arrowPadding = 9;\n    var tooltipRect;\n    var boundsX = bounds.x;\n    var boundsY = bounds.y;\n    var islabelInside = axis.labelPosition === 'Inside';\n    var scrollBarHeight = axis.scrollbarSettings.enable || axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject ? axis.scrollBarHeight : 0;\n    this.elementSize = measureText(text, axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n    if (typeof text !== 'string' && text.length > 1) {\n      this.elementSize.width = 0;\n      this.elementSize.height = 0;\n      for (var i = 0; i < text.length; i++) {\n        var size = measureText(text[i], axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\n        this.elementSize.height += size.height;\n        if (this.elementSize.width < size.width) {\n          this.elementSize.width = size.width;\n        }\n      }\n    }\n    var isOpposed = axis.isAxisOpposedPosition;\n    if (axis.orientation === 'Horizontal') {\n      var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) : axisRect.y + scrollBarHeight;\n      var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\n      this.arrowLocation = new ChartLocation(this.valueX, yLocation);\n      tooltipRect = new Rect(this.valueX - this.elementSize.width / 2 - padding, height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n      if (isOpposed) {\n        tooltipRect.y = islabelInside ? axisRect.y : axisRect.y - (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\n      }\n      if (tooltipRect.x < boundsX) {\n        tooltipRect.x = boundsX;\n      }\n      if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n        tooltipRect.x -= tooltipRect.x + tooltipRect.width - (boundsX + bounds.width);\n      }\n      if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n        this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding;\n      }\n      if (this.arrowLocation.x - arrowPadding < tooltipRect.x + this.rx) {\n        this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding;\n      }\n    } else {\n      scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\n      this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\n      var width = islabelInside ? axisRect.x - scrollBarHeight : axisRect.x - this.elementSize.width - (padding * 2 + arrowPadding);\n      tooltipRect = new Rect(width + scrollBarHeight, this.valueY - this.elementSize.height / 2 - padding, this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n      if (isOpposed) {\n        tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding : axisRect.x + arrowPadding + scrollBarHeight;\n        if (tooltipRect.x + tooltipRect.width > this.chart.availableSize.width) {\n          this.arrowLocation.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n          tooltipRect.x -= tooltipRect.x + tooltipRect.width - this.chart.availableSize.width;\n        }\n      } else {\n        if (tooltipRect.x < 0) {\n          this.arrowLocation.x -= tooltipRect.x;\n          tooltipRect.x = 0;\n        }\n      }\n      if (tooltipRect.y < boundsY) {\n        tooltipRect.y = boundsY;\n      }\n      if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n        tooltipRect.y -= tooltipRect.y + tooltipRect.height - (boundsY + bounds.height);\n      }\n      if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n        this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n      }\n      if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n        this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n      }\n    }\n    return tooltipRect;\n  };\n  Crosshair.prototype.stopAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n  Crosshair.prototype.progressAnimation = function () {\n    stopTimer(this.crosshairInterval);\n  };\n  /**\r\n   * Removes the crosshair on mouse leave.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n  Crosshair.prototype.removeCrosshair = function (duration) {\n    var chart = this.chart;\n    var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') : document.getElementById(this.elementID + '_UserInteraction');\n    var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\n    this.stopAnimation();\n    if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n      this.crosshairInterval = +setTimeout(function () {\n        new Animation({}).animate(crosshair, {\n          duration: 200,\n          progress: function (args) {\n            // crosshair.removeAttribute('e-animate');\n            crosshair.style.animation = '';\n            if (!chart.enableCanvas) {\n              crosshair.setAttribute('opacity', (1 - args.timeStamp / args.duration).toString());\n            } else {\n              crosshair.style.opacity = (1 - args.timeStamp / args.duration).toString();\n              crosshairtooltip.style.opacity = (1 - args.timeStamp / args.duration).toString();\n            }\n          },\n          end: function () {\n            if (chart.enableCanvas) {\n              crosshair.style.opacity = '0';\n              crosshairtooltip.style.opacity = '0';\n            } else {\n              crosshair.setAttribute('opacity', '0');\n            }\n            chart.startMove = false;\n            if (chart.tooltipModule) {\n              chart.tooltipModule.valueX = null;\n              chart.tooltipModule.valueY = null;\n            }\n          }\n        });\n      }, duration);\n    }\n  };\n  /**\r\n   * Get module name.\r\n   *\r\n   * @returns {string} module name\r\n   */\n  Crosshair.prototype.getModuleName = function () {\n    /**\r\n     * Returns the module name.\r\n     */\n    return 'Crosshair';\n  };\n  /**\r\n   * To destroy the crosshair.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n  Crosshair.prototype.destroy = function () {\n    /**\r\n     * Destroy method performed here.\r\n     */\n  };\n  return Crosshair;\n}();\nexport { Crosshair };","map":{"version":3,"names":["Animation","Browser","createElement","textElement","getValueXByPoint","stopTimer","findCrosshairDirection","getValueYByPoint","ChartLocation","withInBounds","removeElement","PathOption","Rect","TextOption","measureText","SvgRenderer","Crosshair","chart","arrowLocation","rx","ry","elementID","element","id","svgRenderer","addEventListener","prototype","isDestroyed","cancelEvent","isPointer","on","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","mouseLeaveHandler","longPress","startMove","removeCrosshair","event","stockChart","onPanning","mouseY","chartAxisLayoutPanel","seriesClipRect","y","height","type","isIos","isIos7","preventDefault","disableTrackTooltip","mouseX","isTouch","crosshair","horizontalCross","verticalCross","options","axisTooltipGroup","document","getElementById","tooltipdiv","chartRect","crossGroup","enableCanvas","crosshairsvg","cross","styles","appendChild","stopAnimation","isCrosshair","tooltip","enable","tooltipModule","valueX","valueY","setAttribute","lineType","x","width","createGroup","createSvg","availableSize","line","horizontalLineColor","color","themeStyle","crosshairLine","opacity","dashArray","drawCrosshairLine","verticalLineColor","renderAxisTooltip","childNodes","length","renderer","renderCrosshairLine","lastChild","htmlObject","drawPath","left","top","direction","style","toString","stroke","crosshairline","crosshairtooltip","cssText","axisGroup","axis","text","rect","pathElement","textElem","padding","axisRect","k","length_1","axisCollections","placeNextToAxisLine","updatedRect","crosshairTooltip","getAxisText","indexOf","split","tooltipLocation","fill","crosshairFill","enableRtl","render","textStyle","crosshairLabelFont","isTop","isBottom","isLeft","i","textContent","elementSize","shadowId","children","parseInt","getAttribute","theme","defElement","createDefs","bordercolor","borderwidth","isIE","shadow","innerHTML","value","isRight","labelValue","valueType","labelPlacement","isOpposed","isAxisOpposedPosition","orientation","Math","abs","format","Date","labels","floor","dateTimeCategoryModule","getIndexedAxisLabel","round","pow","logBase","customLabelFormat","labelFormat","match","replace","bounds","arrowPadding","tooltipRect","boundsX","boundsY","islabelInside","labelPosition","scrollBarHeight","scrollbarSettings","zoomingScrollBar","svgObject","size","yLocation","crosshairInterval","progressAnimation","duration","setTimeout","animate","progress","args","animation","timeStamp","end","getModuleName","destroy"],"sources":["C:/Users/wiliam/Desktop/indiec-nuevo/fronted-vue/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/crosshair.js"],"sourcesContent":["import { Animation, Browser, createElement } from '@syncfusion/ej2-base';\r\nimport { textElement, getValueXByPoint, stopTimer, findCrosshairDirection, getValueYByPoint, ChartLocation, withInBounds, removeElement } from '../../common/utils/helper';\r\nimport { PathOption, Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\r\n/**\r\n * `Crosshair` module is used to render the crosshair for chart.\r\n */\r\nvar Crosshair = /** @class */ (function () {\r\n    /**\r\n     * Constructor for crosshair module.\r\n     *\r\n     * @private\r\n     */\r\n    function Crosshair(chart) {\r\n        this.arrowLocation = new ChartLocation(0, 0);\r\n        this.rx = 2;\r\n        this.ry = 2;\r\n        this.chart = chart;\r\n        this.elementID = this.chart.element.id;\r\n        this.svgRenderer = new SvgRenderer(this.chart.element.id);\r\n        this.addEventListener();\r\n    }\r\n    /**\r\n     * Adds event listeners to the chart elements.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    Crosshair.prototype.addEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\r\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\r\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\r\n        this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\r\n        this.chart.on('tapHold', this.longPress, this);\r\n    };\r\n    Crosshair.prototype.mouseUpHandler = function () {\r\n        if (this.chart.startMove) {\r\n            this.removeCrosshair(2000);\r\n        }\r\n    };\r\n    Crosshair.prototype.mouseLeaveHandler = function () {\r\n        this.removeCrosshair(1000);\r\n    };\r\n    Crosshair.prototype.mouseMoveHandler = function (event) {\r\n        var chart = this.chart;\r\n        if (chart.stockChart && chart.stockChart.onPanning) {\r\n            if (chart.mouseY < chart.chartAxisLayoutPanel.seriesClipRect.y) {\r\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y;\r\n            }\r\n            else if (chart.mouseY > chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height) {\r\n                chart.mouseY = chart.chartAxisLayoutPanel.seriesClipRect.y + chart.chartAxisLayoutPanel.seriesClipRect.height;\r\n            }\r\n        }\r\n        if (event.type === 'touchmove' && (Browser.isIos || Browser.isIos7) && chart.startMove && event.preventDefault) {\r\n            event.preventDefault();\r\n        }\r\n        // Tooltip for chart series.\r\n        if (!chart.disableTrackTooltip) {\r\n            if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\r\n                if (chart.startMove || !chart.isTouch) {\r\n                    this.crosshair();\r\n                }\r\n            }\r\n            else {\r\n                this.removeCrosshair(1000);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Handles the long press on chart.\r\n     *\r\n     * @returns {boolean} false\r\n     * @private\r\n     */\r\n    Crosshair.prototype.longPress = function () {\r\n        var chart = this.chart;\r\n        if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\r\n            this.crosshair();\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Renders the crosshair.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Crosshair.prototype.crosshair = function () {\r\n        var chart = this.chart;\r\n        var horizontalCross = '';\r\n        var verticalCross = '';\r\n        var options;\r\n        var axisTooltipGroup = document.getElementById(this.elementID + '_crosshair_axis');\r\n        var crosshair = chart.crosshair;\r\n        var tooltipdiv = document.getElementById(this.elementID + '_tooltip');\r\n        var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\r\n        var crossGroup = chart.enableCanvas ? document.getElementById(this.elementID + '_Secondary_Element') :\r\n            document.getElementById(this.elementID + '_UserInteraction');\r\n        var crosshairsvg;\r\n        var cross = document.getElementById(this.elementID + '_Crosshair');\r\n        if (chart.enableCanvas) {\r\n            if (!cross) {\r\n                cross = createElement('div', {\r\n                    id: this.elementID + '_Crosshair', styles: 'position: absolute; pointer-events: none'\r\n                });\r\n                crossGroup.appendChild(cross);\r\n            }\r\n        }\r\n        this.stopAnimation();\r\n        if (chart.isCrosshair && chart.tooltip.enable && chart.tooltipModule && !withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect)) {\r\n            return null;\r\n        }\r\n        this.valueX = chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueX ? chart.tooltipModule.valueX : chart.mouseX;\r\n        this.valueY = chart.tooltip.enable && chart.tooltipModule && chart.tooltipModule.valueY ? chart.tooltipModule.valueY : chart.mouseY;\r\n        if (!chart.enableCanvas) {\r\n            crossGroup.setAttribute('opacity', '1');\r\n        }\r\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\r\n            horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY +\r\n                ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\r\n        }\r\n        if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\r\n            verticalCross += 'M ' + this.valueX + ' ' + chartRect.y +\r\n                ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\r\n        }\r\n        if (chart.enableCanvas) {\r\n            if (!axisTooltipGroup) {\r\n                axisTooltipGroup = this.svgRenderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\r\n            }\r\n            var elementID = chart.tooltip.enable ? chart.element.id + '_tooltip_svg' : chart.element.id + '_svg';\r\n            crosshairsvg = this.svgRenderer.createSvg({\r\n                id: elementID,\r\n                width: chart.availableSize.width,\r\n                height: chart.availableSize.height\r\n            });\r\n            if (chart.tooltip.enable) {\r\n                tooltipdiv = !tooltipdiv ? chart.tooltipModule.createElement() : tooltipdiv;\r\n                tooltipdiv.appendChild(crosshairsvg);\r\n                crossGroup.appendChild(tooltipdiv);\r\n            }\r\n            options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\r\n            this.drawCrosshairLine(options, cross, chartRect.x, this.valueY, chartRect.width, 0, horizontalCross);\r\n            /**\r\n             * due to not working for vertical line side I added new option\r\n             * options.d = verticalCross; options.id = this.elementID + '_VerticalLine';\r\n             */\r\n            options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\r\n            this.drawCrosshairLine(options, cross, this.valueX, chartRect.y, 0, chartRect.height, verticalCross);\r\n            this.renderAxisTooltip(chart, chartRect, axisTooltipGroup);\r\n            crosshairsvg.appendChild(axisTooltipGroup);\r\n            if (!chart.tooltip.enable) {\r\n                cross.appendChild(crosshairsvg);\r\n            }\r\n        }\r\n        else {\r\n            if (crossGroup.childNodes.length === 0) {\r\n                axisTooltipGroup = chart.renderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\r\n                options = new PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.horizontalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, horizontalCross);\r\n                this.renderCrosshairLine(options, crossGroup);\r\n                options = new PathOption(this.elementID + '_VerticalLine', 'none', crosshair.line.width, crosshair.verticalLineColor || crosshair.line.color || chart.themeStyle.crosshairLine, crosshair.opacity, crosshair.dashArray, verticalCross);\r\n                this.renderCrosshairLine(options, crossGroup);\r\n                crossGroup.appendChild(axisTooltipGroup);\r\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\r\n            }\r\n            else {\r\n                document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\r\n                document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\r\n                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\r\n            }\r\n        }\r\n    };\r\n    Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\r\n        var htmlObject = this.chart.renderer.drawPath(options);\r\n        crossGroup.appendChild(htmlObject);\r\n    };\r\n    Crosshair.prototype.drawCrosshairLine = function (options, crossGroup, left, top, width, height, direction) {\r\n        if (!document.getElementById(options.id) && direction) {\r\n            var line = createElement('div', {\r\n                id: options.id\r\n            });\r\n            crossGroup.appendChild(line);\r\n        }\r\n        if (document.getElementById(options.id)) {\r\n            var style = 'top:' + top.toString() + 'px;' +\r\n                'left:' + left.toString() + 'px;' +\r\n                'width:' + width + 'px;' +\r\n                'height:' + height + 'px;' +\r\n                'fill:' + options.stroke + ';' +\r\n                'border: 0.5px solid ' + options.stroke + ';' +\r\n                'opacity: ' + options.opacity + ' ; ' +\r\n                'position: absolute';\r\n            var crosshairline = document.getElementById(options.id);\r\n            var crosshairtooltip = document.getElementById(this.elementID + '_crosshair_axis');\r\n            crosshairline.style.cssText = style;\r\n            crossGroup.style.opacity = '1';\r\n            if (crosshairtooltip) {\r\n                crosshairtooltip.style.opacity = '1';\r\n            }\r\n        }\r\n    };\r\n    Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\r\n        var axis;\r\n        var text;\r\n        var rect;\r\n        var pathElement;\r\n        var textElem;\r\n        var options;\r\n        var padding = 5;\r\n        var direction;\r\n        var axisRect;\r\n        for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\r\n            axis = chart.axisCollections[k];\r\n            axisRect = !axis.placeNextToAxisLine ? axis.rect : axis.updatedRect;\r\n            if (axis.crosshairTooltip.enable) {\r\n                if (axisRect && ((this.valueX <= (axisRect.x + axisRect.width) && axisRect.x <= this.valueX) ||\r\n                    (this.valueY <= (axisRect.y + axisRect.height) && axisRect.y <= this.valueY))) {\r\n                    pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\r\n                    textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\r\n                    text = this.getAxisText(axis);\r\n                    if (text && text.indexOf('<br') > -1) {\r\n                        text = this.getAxisText(axis).split(/<br.*?>/g);\r\n                    }\r\n                    if (!text) {\r\n                        continue;\r\n                    }\r\n                    rect = this.tooltipLocation(text, axis, chartRect, axisRect);\r\n                    if (rect.y + rect.height / 2 > chart.availableSize.height || rect.y < 0) {\r\n                        continue;\r\n                    }\r\n                    if (pathElement === null) {\r\n                        if (chart.enableCanvas) {\r\n                            pathElement = this.svgRenderer.drawPath({\r\n                                'id': this.elementID + '_axis_tooltip_' + k,\r\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\r\n                            });\r\n                        }\r\n                        else {\r\n                            pathElement = chart.renderer.drawPath({\r\n                                'id': this.elementID + '_axis_tooltip_' + k,\r\n                                'fill': axis.crosshairTooltip.fill || chart.themeStyle.crosshairFill\r\n                            }, null);\r\n                        }\r\n                        axisGroup.appendChild(pathElement);\r\n                        options = new TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, (chart.stockChart && chart.enableRtl) ? 'end' : 'start', text);\r\n                        var render = chart.enableCanvas ? this.svgRenderer : chart.renderer;\r\n                        textElem = textElement(render, options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color || chart.themeStyle.crosshairLabelFont.color, axisGroup, null, null, null, null, null, null, null, null, chart.enableCanvas, null, this.chart.themeStyle.crosshairLabelFont);\r\n                    }\r\n                    direction = findCrosshairDirection(this.rx, this.ry, rect, this.arrowLocation, 9, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\r\n                    pathElement.setAttribute('d', direction);\r\n                    if (typeof text !== 'string' && text.length > 1) {\r\n                        for (var i = 0; i < text.length; i++) {\r\n                            textElem.childNodes[i].textContent = text[i];\r\n                        }\r\n                    }\r\n                    else {\r\n                        textElem.textContent = text;\r\n                    }\r\n                    textElem.setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0)).toString());\r\n                    textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\r\n                    var shadowId = this.chart.element.id + '_shadow';\r\n                    if (typeof text !== 'string' && text.length > 1) {\r\n                        var height = 0;\r\n                        textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / (4 * text.length)).toString());\r\n                        for (var i = 0; i < textElem.children.length; i++) {\r\n                            height += this.elementSize.height / text.length;\r\n                            textElem.children[i].setAttribute('x', (rect.x + padding + (chart.enableRtl ? this.elementSize.width : 0) + this.elementSize.width / 2).toString());\r\n                            textElem.children[i].setAttribute('y', ((parseInt(textElem.getAttribute('y'), 10) + height).toString()));\r\n                            textElem.children[i].setAttribute('style', 'text-anchor: middle');\r\n                        }\r\n                    }\r\n                    if (this.chart.theme === 'Fluent' || this.chart.theme === 'FluentDark' || this.chart.theme === 'Fabric' || this.chart.theme === 'FabricDark') {\r\n                        var defElement = this.chart.renderer.createDefs();\r\n                        var bordercolor = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? '#D2D0CE' : null;\r\n                        var borderwidth = this.chart.theme === 'Fluent' || this.chart.theme === 'Fabric' ? 1 : null;\r\n                        defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\r\n                        axisGroup.appendChild(defElement);\r\n                        pathElement.setAttribute('stroke', bordercolor);\r\n                        pathElement.setAttribute('stroke-width', ' ' + borderwidth);\r\n                    }\r\n                    else if (this.chart.theme.indexOf('Fluent2') > -1) {\r\n                        pathElement.setAttribute('box-shadow', '0px 1.6px 3.6px 0px #00000021, 0px 0.3px 0.9px 0px #0000001A');\r\n                        pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\r\n                        var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\r\n                        shadow += '<feOffset dx=\"-1\" dy=\"3.6\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.2\"/>';\r\n                        shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\r\n                        var defElement = this.chart.renderer.createDefs();\r\n                        defElement.setAttribute('id', this.chart.element.id + 'SVG_tooltip_definition');\r\n                        pathElement.appendChild(defElement);\r\n                        defElement.innerHTML = shadow;\r\n                    }\r\n                }\r\n                else {\r\n                    removeElement(this.elementID + '_axis_tooltip_' + k);\r\n                    removeElement(this.elementID + '_axis_tooltip_text_' + k);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Crosshair.prototype.getAxisText = function (axis) {\r\n        var value;\r\n        this.isBottom = false;\r\n        this.isTop = false;\r\n        this.isLeft = false;\r\n        this.isRight = false;\r\n        var labelValue = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks')\r\n            ? 0.5 : 0;\r\n        var isOpposed = axis.isAxisOpposedPosition;\r\n        if (axis.orientation === 'Horizontal') {\r\n            value = getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\r\n            this.isBottom = !isOpposed;\r\n            this.isTop = isOpposed;\r\n        }\r\n        else {\r\n            value = getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\r\n            this.isRight = isOpposed;\r\n            this.isLeft = !isOpposed;\r\n        }\r\n        if (axis.valueType === 'DateTime') {\r\n            return axis.format(new Date(value));\r\n        }\r\n        else if (axis.valueType === 'Category') {\r\n            return axis.labels[Math.floor(value)];\r\n        }\r\n        else if (axis.valueType === 'DateTimeCategory') {\r\n            return this.chart.dateTimeCategoryModule.getIndexedAxisLabel(axis.labels[Math.round(value)], axis.format);\r\n        }\r\n        else if (axis.valueType === 'Logarithmic') {\r\n            return value = axis.format(Math.pow(axis.logBase, value));\r\n        }\r\n        else {\r\n            var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\r\n            return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\r\n        }\r\n    };\r\n    Crosshair.prototype.tooltipLocation = function (text, axis, bounds, axisRect) {\r\n        var padding = 5;\r\n        var arrowPadding = 9;\r\n        var tooltipRect;\r\n        var boundsX = bounds.x;\r\n        var boundsY = bounds.y;\r\n        var islabelInside = axis.labelPosition === 'Inside';\r\n        var scrollBarHeight = axis.scrollbarSettings.enable || (axis.zoomingScrollBar && axis.zoomingScrollBar.svgObject)\r\n            ? axis.scrollBarHeight : 0;\r\n        this.elementSize = measureText(text, axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\r\n        if (typeof text !== 'string' && text.length > 1) {\r\n            this.elementSize.width = 0;\r\n            this.elementSize.height = 0;\r\n            for (var i = 0; i < text.length; i++) {\r\n                var size = measureText(text[i], axis.crosshairTooltip.textStyle, this.chart.themeStyle.crosshairLabelFont);\r\n                this.elementSize.height += size.height;\r\n                if (this.elementSize.width < size.width) {\r\n                    this.elementSize.width = size.width;\r\n                }\r\n            }\r\n        }\r\n        var isOpposed = axis.isAxisOpposedPosition;\r\n        if (axis.orientation === 'Horizontal') {\r\n            var yLocation = islabelInside ? axisRect.y - this.elementSize.height - (padding * 2 + arrowPadding) :\r\n                axisRect.y + scrollBarHeight;\r\n            var height = islabelInside ? axisRect.y - this.elementSize.height - arrowPadding : axisRect.y + arrowPadding;\r\n            this.arrowLocation = new ChartLocation(this.valueX, yLocation);\r\n            tooltipRect = new Rect((this.valueX - (this.elementSize.width / 2) - padding), height + (!islabelInside ? scrollBarHeight : 0), this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\r\n            if (isOpposed) {\r\n                tooltipRect.y = islabelInside ? axisRect.y : axisRect.y -\r\n                    (this.elementSize.height + padding * 2 + arrowPadding) - scrollBarHeight;\r\n            }\r\n            if (tooltipRect.x < boundsX) {\r\n                tooltipRect.x = boundsX;\r\n            }\r\n            if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\r\n                tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - (boundsX + bounds.width));\r\n            }\r\n            if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\r\n                this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding;\r\n            }\r\n            if (this.arrowLocation.x - arrowPadding < tooltipRect.x + this.rx) {\r\n                this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding;\r\n            }\r\n        }\r\n        else {\r\n            scrollBarHeight = scrollBarHeight * (isOpposed ? 1 : -1);\r\n            this.arrowLocation = new ChartLocation(axisRect.x, this.valueY);\r\n            var width = islabelInside ? axisRect.x - scrollBarHeight :\r\n                axisRect.x - (this.elementSize.width) - (padding * 2 + arrowPadding);\r\n            tooltipRect = new Rect(width + scrollBarHeight, this.valueY - (this.elementSize.height / 2) - padding, this.elementSize.width + (padding * 2), this.elementSize.height + padding * 2);\r\n            if (isOpposed) {\r\n                tooltipRect.x = islabelInside ? axisRect.x - this.elementSize.width - arrowPadding :\r\n                    axisRect.x + arrowPadding + scrollBarHeight;\r\n                if ((tooltipRect.x + tooltipRect.width) > this.chart.availableSize.width) {\r\n                    this.arrowLocation.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\r\n                    tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\r\n                }\r\n            }\r\n            else {\r\n                if (tooltipRect.x < 0) {\r\n                    this.arrowLocation.x -= tooltipRect.x;\r\n                    tooltipRect.x = 0;\r\n                }\r\n            }\r\n            if (tooltipRect.y < boundsY) {\r\n                tooltipRect.y = boundsY;\r\n            }\r\n            if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\r\n                tooltipRect.y -= ((tooltipRect.y + tooltipRect.height) - (boundsY + bounds.height));\r\n            }\r\n            if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\r\n                this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\r\n            }\r\n            if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\r\n                this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\r\n            }\r\n        }\r\n        return tooltipRect;\r\n    };\r\n    Crosshair.prototype.stopAnimation = function () {\r\n        stopTimer(this.crosshairInterval);\r\n    };\r\n    Crosshair.prototype.progressAnimation = function () {\r\n        stopTimer(this.crosshairInterval);\r\n    };\r\n    /**\r\n     * Removes the crosshair on mouse leave.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Crosshair.prototype.removeCrosshair = function (duration) {\r\n        var chart = this.chart;\r\n        var crosshair = chart.enableCanvas ? document.getElementById(this.elementID + '_Crosshair') :\r\n            document.getElementById(this.elementID + '_UserInteraction');\r\n        var crosshairtooltip = chart.enableCanvas ? document.getElementById(this.elementID + '_crosshair_axis') : null;\r\n        this.stopAnimation();\r\n        if (crosshair && crosshair.getAttribute('opacity') !== '0') {\r\n            this.crosshairInterval = +setTimeout(function () {\r\n                new Animation({}).animate(crosshair, {\r\n                    duration: 200,\r\n                    progress: function (args) {\r\n                        // crosshair.removeAttribute('e-animate');\r\n                        crosshair.style.animation = '';\r\n                        if (!chart.enableCanvas) {\r\n                            crosshair.setAttribute('opacity', (1 - (args.timeStamp / args.duration)).toString());\r\n                        }\r\n                        else {\r\n                            crosshair.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\r\n                            crosshairtooltip.style.opacity = (1 - (args.timeStamp / args.duration)).toString();\r\n                        }\r\n                    },\r\n                    end: function () {\r\n                        if (chart.enableCanvas) {\r\n                            crosshair.style.opacity = '0';\r\n                            crosshairtooltip.style.opacity = '0';\r\n                        }\r\n                        else {\r\n                            crosshair.setAttribute('opacity', '0');\r\n                        }\r\n                        chart.startMove = false;\r\n                        if (chart.tooltipModule) {\r\n                            chart.tooltipModule.valueX = null;\r\n                            chart.tooltipModule.valueY = null;\r\n                        }\r\n                    }\r\n                });\r\n            }, duration);\r\n        }\r\n    };\r\n    /**\r\n     * Get module name.\r\n     *\r\n     * @returns {string} module name\r\n     */\r\n    Crosshair.prototype.getModuleName = function () {\r\n        /**\r\n         * Returns the module name.\r\n         */\r\n        return 'Crosshair';\r\n    };\r\n    /**\r\n     * To destroy the crosshair.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Crosshair.prototype.destroy = function () {\r\n        /**\r\n         * Destroy method performed here.\r\n         */\r\n    };\r\n    return Crosshair;\r\n}());\r\nexport { Crosshair };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}